{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","../../ng-cast.component.ts","../../shared/ng-cast.service.ts","../../ng.cast.module.ts","../../CastVideos.js"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","NgCastComponent","ngCastService","this","prototype","ngOnInit","window","isAvailable","initializeCastApi","castingStatus","getStatus","openSession","discoverDevices","closeSession","stop","Component","selector","template","NgCastService","_this","status","casting","onInitSuccess","console","log","onError","err","self","subj","Subject","cast","requestSession","s","session","setCasting","next","code","undefined","error","onMediaDiscovered","categories","script","createElement","setAttribute","body","appendChild","mediaJSON","play","currentMedia","pause","onMediaError","sessionRequest","SessionRequest","media","DEFAULT_MEDIA_RECEIVER_APP_ID","apiConfig","ApiConfig","ReceiverAvailability","AVAILABLE","initialize","value","Injectable","NgCastModule","NgModule","schemas","CUSTOM_ELEMENTS_SCHEMA","imports","CommonModule","exports","providers","declarations","MEDIA_SOURCE_ROOT","ENABLE_ADS","ENABLE_LIVE","PROGRESS_BAR_WIDTH","FULL_VOLUME_HEIGHT","PLAYER_STATE","CastPlayer","playerHandler","PlayerHandler","playerState","playerStateBeforeSwitch","remotePlayer","remotePlayerController","currentMediaTime","mediaDuration","timer","incrementMediaTimeHandler","incrementMediaTime","bind","seekMediaListener","seekMedia","currentMediaIndex","mediaContents","fullscreen","mediaInfo","whenSkippable","liveSeekableRange","isLiveContent","setupLocalPlayer","addVideoThumbs","initializeUI","initializeCastPlayer","options","receiverApplicationId","autoJoinPolicy","chrome","AutoJoinPolicy","ORIGIN_SCOPED","framework","CastContext","getInstance","setOptions","RemotePlayer","RemotePlayerController","addEventListener","RemotePlayerEventType","IS_CONNECTED_CHANGED","e","switchPlayer","stopProgressTimer","resetVolumeSlider","isConnected","setupRemotePlayer","castPlayer","setTarget","isMediaLoaded","document","getElementById","style","display","load","mediaIndex","prepareToPlay","getMediaDuration","updateDurationDisplay","startProgressTimer","updateDisplay","getCurrentMediaTime","updateCurrentTimeDisplay","setTimeString","element","time","setVolume","volumeSliderPosition","mute","unMute","isMuted","seekTo","removeAdMarkers","localPlayer","onMediaLoadedLocally","playerTarget","src","currentTime","duration","innerHTML","currentTimeString","getMediaTimeString","volume","p","height","marginTop","muted","DEFAULT_VOLUME","showFullscreenButton","enableProgressBar","MEDIA_INFO_CHANGED","event","getCurrentSession","getMediaSession","streamType","StreamType","LIVE","updateAdMarkers","CAN_SEEK_CHANGED","IS_PAUSED_CHANGED","isPaused","IS_MUTED_CHANGED","VOLUME_LEVEL_CHANGED","newVolume","volumeLevel","IS_PLAYING_BREAK_CHANGED","isPlayingBreak","WHEN_SKIPPABLE_CHANGED","onWhenSkippableChanged","CURRENT_BREAK_CLIP_TIME_CHANGED","onCurrentBreakClipTimeChanged","BREAK_CLIP_ID_CHANGED","onBreakClipIdChanged","LIVE_SEEKABLE_RANGE_CHANGED","playOrPause","MediaInfo","BUFFERED","metadata","TvShowMediaMetadata","title","subtitle","images","url","request","LoadRequest","breakClips","breakClipsJSON","breaks","breaksJSON","Date","sectionStartAbsoluteTime","startAbsoluteTime","sectionStartTimeInMedia","sectionDuration","item","QueueItem","queueData","QueueData","items","name","autoplay","loadMedia","then","errorCode","getErrorMessage","castSession","vi","mediaTitle","mediaEpisodeTitle","mediaSubtitle","episodeTitle","getCastDevice","friendlyName","live_indicator","Math","abs","getEstimatedTime","end","getClockTimeString","currentVolume","setVolumeLevel","muteOrUnmute","seek","canSeek","opacity","hideFullscreenButton","getSessionState","SessionState","SESSION_RESUMED","selectMedia","currentMediaInfo","marginLeft","width","seekable_window","unseekable_overlay","position","parseInt","offsetX","pi","progress","seekTime","pp","pw","currentTarget","id","mouseEvent","pos","offsetY","clientHeight","setInterval","clearInterval","updateProgressBarByTimer","endPlayback","progressBar","seekable_window_1","unseekable_overlay_1","isNaN","floor","seekableMediaPosition","max","seekableWidth","unseekableMediaPosition","start","unseekableWidth","timestamp","isNegative","hours","minutes","seconds","date","getHours","getMinutes","getSeconds","ampm","slice","contentDuration","adBreak","isEmbedded","adPositionToMargin","querySelectorAll","forEach","adMarker","remove","currentBreakClipTime","skipAd","enable","progress_indicator","backgroundImage","cursor","draggable","removeEventListener","requestFullScreen","requestMethod","call","cancelFullScreen","fullscreenChangeHandler","showMediaControl","hideMediaControl","context","showVolumeSlider","hideVolumeSlider","defaultVolumeSliderHeight","noneRadio","onclick","adsRadio","liveRadio","checked","ni","newdiv","divIdName","ErrorCode","API_NOT_INITIALIZED","description","CANCEL","CHANNEL_ERROR","EXTENSION_MISSING","INVALID_PARAMETER","RECEIVER_UNAVAILABLE","SESSION_ERROR","TIMEOUT"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\nimport { NgCastService } from './shared/ng-cast.service';\n\n@Component({\n  selector: 'ng-cast',\n  templateUrl: './ng-cast.component.html',\n  styleUrls: [\n    './ng-cast.component.scss'\n  ]\n})\nexport class NgCastComponent implements OnInit {\n  castingStatus: any;\n  window: any;\n\n  constructor(\n    private ngCastService: NgCastService\n  ) { }\n\n  ngOnInit() {\n    this.window = window;\n\n    let ngCastService = this.ngCastService;\n    this.window['__onGCastApiAvailable'] = function (isAvailable: boolean) {\n      if (isAvailable) {\n        ngCastService.initializeCastApi();\n      }\n    };\n\n    this.castingStatus = this.ngCastService.getStatus();\n  }\n\n  openSession() {\n    this.ngCastService.discoverDevices();\n  }\n\n  closeSession() {\n    this.ngCastService.stop();\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\ndeclare var mediaJSON: any;\n\n@Injectable()\nexport class NgCastService {\n  private cast: any;\n  private currentMedia: any;\n  private window: any = window;\n\n  public status = {\n    casting: false\n  };\n\n  constructor() {\n    \n  }\n\n  initializeCastApi() {\n    this.cast = this.window['chrome'].cast;\n    let sessionRequest = new this.cast.SessionRequest(this.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID);\n    let apiConfig = new this.cast.ApiConfig(sessionRequest,\n      () => { },\n      (status: any) => { if (status === this.cast.ReceiverAvailability.AVAILABLE) { } }\n    );\n    let x = this.cast.initialize(apiConfig, this.onInitSuccess, this.onError);\n  };\n\n  onInitSuccess = function () {\n    console.log('GCast initialization success');\n  };\n\n  onError = function (err: any) {\n    console.log('GCast initialization failed', err);\n  };\n\n  discoverDevices = () => {\n    let self: any = this;\n    let subj = new Subject();\n    this.cast.requestSession((s: any) => {\n      self.session = s;\n      self.setCasting(true);\n      subj.next('CONNECTED');\n    }, function (err: any) {\n      self.setCasting(false);\n      if (err.code === 'cancel') {\n        self.session = undefined;\n        subj.next('CANCEL');\n      } else {\n        console.error('Error selecting a cast device', err);\n      }\n    });\n    return subj;\n  };\n\n  onMediaDiscovered = (categories: any[]) => {\n    let script = window['document'].createElement('script');\n    script.setAttribute('type', 'text/javascript');\n    script.setAttribute('src', 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1');\n    window['document'].body.appendChild(script);\n\n    mediaJSON.categories = categories;\n  };\n\n  play = () => {\n    this.currentMedia.play(null);\n  };\n\n  pause = () => {\n    this.currentMedia.pause(null);\n  };\n\n  stop = () => {\n    this.currentMedia.stop(null);\n  };\n\n  onMediaError = (err: any) => {\n    console.error('Error launching media', err);\n  };\n\n  setCasting(value: any) {\n    this.status.casting = value;\n  }\n\n  getStatus() {\n    return this.status\n  }\n}\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgCastComponent } from './ng-cast.component';\nimport { NgCastService } from './shared/ng-cast.service';\n\n@NgModule({\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  imports: [\n    CommonModule\n  ],\n  exports: [NgCastComponent],\n  providers: [NgCastService],\n  declarations: [NgCastComponent]\n})\nexport class NgCastModule { }\n","'use strict';\n\nvar mediaJSON = { \n  'categories': []\n};\n\n/** Cleaner UI for demo purposes. */\nconst DEMO_MODE = false;\n\n/** @const {string} Media source root URL */\nconst MEDIA_SOURCE_ROOT = 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/';\n\n/**\n * Controls if Ads are enabled. Controlled by radio button.\n * @type {boolean}\n */\nlet ENABLE_ADS = false;\n\n/**\n * Controls if Live stream is played. Controlled by radio button.\n * @type {boolean}\n */\nlet ENABLE_LIVE = false;\n\n/**\n * Buffer to decide if the live indicator should be displayed to show that\n * playback is at the playback head.\n * @const {number}\n */\nconst LIVE_INDICATOR_BUFFER = 50;\n\n/**\n * Width of progress bar in pixels.\n * @const {number}\n */\nconst PROGRESS_BAR_WIDTH = 700;\n\n/**\n * Time in milliseconds for minimal progress update.\n * @const {number}\n */\nconst TIMER_STEP = 1000;\n\n/**\n * Cast volume upon initial connection.\n * @const {number}\n */\nconst DEFAULT_VOLUME = 0.5;\n\n/**\n * Height, in pixels, of volume bar.\n * @const {number}\n */\nconst FULL_VOLUME_HEIGHT = 100;\n\n/** @enum {string} Constants of states for media for both local and remote playback */\nconst PLAYER_STATE = {\n  // No media is loaded into the player. For remote playback, maps to\n  // the PlayerState.IDLE state.\n  IDLE: 'IDLE',\n  // Player is in PLAY mode but not actively playing content. For remote\n  // playback, maps to the PlayerState.BUFFERING state.\n  BUFFERING: 'BUFFERING',\n  // The media is loaded but not playing.\n  LOADED: 'LOADED',\n  // The media is playing. For remote playback, maps to the PlayerState.PLAYING state.\n  PLAYING: 'PLAYING',\n  // The media is paused. For remote playback, maps to the PlayerState.PAUSED state.\n  PAUSED: 'PAUSED'\n};\n\n/**\n * Cast player object\n * Main variables:\n *  - PlayerHandler object for handling media playback\n *  - Cast player variables for controlling Cast mode media playback\n *  - Current media variables for transition between Cast and local modes\n *  - Current ad variables for controlling UI based on ad playback\n *  - Current live variables for controlling UI based on ad playback\n * @struct @constructor\n */\nvar CastPlayer = function () {\n  /** @type {PlayerHandler} Delegation proxy for media playback */\n  this.playerHandler = new PlayerHandler(this);\n\n  /** @type {PLAYER_STATE} A state for media playback */\n  this.playerState = PLAYER_STATE.IDLE;\n\n  /**\n   * @type {PLAYER_STATE} Player state before switching between local and\n   * remote playback.\n   */\n  this.playerStateBeforeSwitch = null;\n\n  /* Cast player variables */\n  /** @type {cast.framework.RemotePlayer} */\n  this.remotePlayer = null;\n  /** @type {cast.framework.RemotePlayerController} */\n  this.remotePlayerController = null;\n\n  /* Local+Remote player variables */\n  /** @type {number} A number for current time in seconds. Maintained in media time. */\n  this.currentMediaTime = 0;\n  /**\n   * @type {?number} A number for current duration in seconds. Maintained in media time.\n   * Null if duration should not be shown.\n   */\n  this.mediaDuration = -1;\n\n  /** @type {?number} A timer for tracking progress of media */\n  this.timer = null;\n  /** @type {function()} Listener for handling current time increments */\n  this.incrementMediaTimeHandler = this.incrementMediaTime.bind(this);\n  /** @type {function()} Listener to be added/removed for the seek action */\n  this.seekMediaListener = this.seekMedia.bind(this);\n\n  /* Local player variables */\n  /** @type {number} A number for current media index */\n  this.currentMediaIndex = 0;\n  /** @type {?Object} media contents from JSON */\n  this.mediaContents = null;\n  /** @type {boolean} Fullscreen mode on/off */\n  this.fullscreen = false;\n\n  /* Remote Player variables */\n  /** @type {?chrome.cast.media.MediaInfo} Current mediaInfo */\n  this.mediaInfo = null;\n  /* Ad variables */\n  /**\n   * @type {?number} The time in seconds when the break clip becomes skippable.\n   * 5 means that the end user can skip this break clip after 5 seconds. If\n   * negative or not defined, it means that the current break clip is not skippable.\n   */\n  this.whenSkippable = null;\n\n  /* Live variables */\n  /** @type {?chrome.cast.media.LiveSeekableRange} Seekable range for live content */\n  this.liveSeekableRange = null;\n  /** @type {boolean} Remote player is playing live content. */\n  this.isLiveContent = false;\n\n  this.setupLocalPlayer();\n  this.addVideoThumbs();\n  this.initializeUI();\n};\n\nCastPlayer.prototype.initializeCastPlayer = function () {\n  var options = {};\n\n  // Set the receiver application ID to your own (created in the\n  // Google Cast Developer Console), or optionally\n  // use the chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID\n  options.receiverApplicationId = 'C0868879';\n\n  // Auto join policy can be one of the following three:\n  // ORIGIN_SCOPED - Auto connect from same appId and page origin\n  // TAB_AND_ORIGIN_SCOPED - Auto connect from same appId, page origin, and tab\n  // PAGE_SCOPED - No auto connect\n  options.autoJoinPolicy = chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED;\n\n  cast.framework.CastContext.getInstance().setOptions(options);\n\n  this.remotePlayer = new cast.framework.RemotePlayer();\n  this.remotePlayerController = new cast.framework.RemotePlayerController(this.remotePlayer);\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,\n    function (e) {\n      this.switchPlayer(e.value);\n    }.bind(this)\n  );\n};\n\n/**\n * Switch between the remote and local players.\n */\nCastPlayer.prototype.switchPlayer = function () {\n  this.playerStateBeforeSwitch = this.playerState;\n\n  this.stopProgressTimer();\n  this.resetVolumeSlider();\n\n  // Session is active\n  if (cast && cast.framework && this.remotePlayer.isConnected) {\n    // Pause local playback\n    this.playerHandler.pause();\n    this.setupRemotePlayer();\n  } else {\n    this.setupLocalPlayer();\n  }\n};\n\n/**\n * PlayerHandler\n *\n * This is a handler through which the application will interact\n * with both the RemotePlayer and LocalPlayer. Combining these two into\n * one interface is one approach to the dual-player nature of a Cast\n * Chrome application. Otherwise, the state of the RemotePlayer can be\n * queried at any time to decide whether to interact with the local\n * or remote players.\n *\n * To set the player used, implement the following methods for a target object\n * and call setTarget(target).\n *\n * Methods to implement:\n *  - play()\n *  - pause()\n *  - stop()\n *  - seekTo(time)\n *  - load(mediaIndex)\n *  - isMediaLoaded(mediaIndex)\n *  - prepareToPlay()\n *  - getMediaDuration()\n *  - getCurrentMediaTime()\n *  - setVolume(volumeSliderPosition)\n *  - mute()\n *  - unMute()\n *  - isMuted()\n *  - updateDisplay()\n *  - updateCurrentTimeDisplay()\n *  - updateDurationDisplay()\n *  - setTimeString(element, time)\n */\nvar PlayerHandler = function (castPlayer) {\n  this.target = {};\n\n  this.setTarget = function (target) {\n    this.target = target;\n  };\n\n  this.play = function () {\n    if (castPlayer.playerState == PLAYER_STATE.IDLE ||\n      !this.target.isMediaLoaded(castPlayer.currentMediaIndex)) {\n      this.load(castPlayer.currentMediaIndex);\n      return;\n    }\n\n    castPlayer.playerState = PLAYER_STATE.PLAYING;\n    this.target.play();\n\n    document.getElementById('play').style.display = 'none';\n    document.getElementById('pause').style.display = 'block';\n  };\n\n  this.pause = function () {\n    this.target.pause();\n    castPlayer.playerState = PLAYER_STATE.PAUSED;\n    document.getElementById('play').style.display = 'block';\n    document.getElementById('pause').style.display = 'none';\n  };\n\n  this.stop = function () {\n    castPlayer.playerState = PLAYER_STATE.IDLE;\n    this.target.stop();\n  };\n\n  this.load = function (mediaIndex = null) {\n    if (!mediaIndex) {\n      mediaIndex = castPlayer.currentMediaIndex;\n    }\n    castPlayer.playerState = PLAYER_STATE.BUFFERING;\n    this.target.load(mediaIndex);\n  };\n\n  /**\n   * Check if media has been loaded on the target player.\n   * @param {number?} mediaIndex The desired media index. If null, verify if\n   *  any media is loaded.\n   */\n  this.isMediaLoaded = function (mediaIndex) {\n    return this.target.isMediaLoaded(mediaIndex);\n  };\n\n  /**\n   * Called after media has been successfully loaded and is ready to start playback.\n   * When local, will start playing the video, start the timer, and update the UI.\n   * When remote, will set the UI to PLAYING and start the timer to update the\n   *   UI based on remote playback.\n   */\n  this.prepareToPlay = function () {\n    castPlayer.mediaDuration = this.getMediaDuration();\n    castPlayer.playerHandler.updateDurationDisplay();\n    castPlayer.playerState = PLAYER_STATE.LOADED;\n\n    this.play();\n    castPlayer.startProgressTimer();\n    this.updateDisplay();\n  };\n\n  this.getCurrentMediaTime = function () {\n    return this.target.getCurrentMediaTime();\n  };\n\n  this.getMediaDuration = function () {\n    return this.target.getMediaDuration();\n  };\n\n  this.updateDisplay = function () {\n    // Update local variables\n    this.currentMediaTime = this.target.getCurrentMediaTime();\n    this.mediaDuration = this.target.getMediaDuration();\n\n    this.target.updateDisplay();\n  };\n\n  this.updateCurrentTimeDisplay = function () {\n    this.target.updateCurrentTimeDisplay();\n  };\n\n  this.updateDurationDisplay = function () {\n    this.target.updateDurationDisplay();\n  };\n\n  /**\n   * Determines the correct time string (media or clock) and sets it for the given element.\n   */\n  this.setTimeString = function (element, time) {\n    this.target.setTimeString(element, time);\n  };\n\n  this.setVolume = function (volumeSliderPosition) {\n    this.target.setVolume(volumeSliderPosition);\n  };\n\n  this.mute = function () {\n    this.target.mute();\n    document.getElementById('audio_on').style.display = 'none';\n    document.getElementById('audio_off').style.display = 'block';\n  };\n\n  this.unMute = function () {\n    this.target.unMute();\n    document.getElementById('audio_on').style.display = 'block';\n    document.getElementById('audio_off').style.display = 'none';\n  };\n\n  this.isMuted = function () {\n    return this.target.isMuted();\n  };\n\n  this.seekTo = function (time) {\n    this.target.seekTo(time);\n  };\n};\n\n/**\n * Set the PlayerHandler target to use the video-element player\n */\nCastPlayer.prototype.setupLocalPlayer = function () {\n  // Cleanup remote player UI\n  document.getElementById('live_indicator').style.display = 'none';\n  this.removeAdMarkers();\n  document.getElementById('skip').style.display = 'none';\n\n  var localPlayer = document.getElementById('video_element');\n  localPlayer.addEventListener(\n    'loadeddata', this.onMediaLoadedLocally.bind(this));\n\n  // This object will implement PlayerHandler callbacks with localPlayer\n  var playerTarget = {};\n\n  playerTarget.play = function () {\n    localPlayer.play();\n\n    var vi = document.getElementById('video_image');\n    vi.style.display = 'none';\n    localPlayer.style.display = 'block';\n  };\n\n  playerTarget.pause = function () {\n    localPlayer.pause();\n  };\n\n  playerTarget.stop = function () {\n    localPlayer.stop();\n  };\n\n  playerTarget.load = function (mediaIndex) {\n    localPlayer.src = this.mediaContents[mediaIndex]['sources'][0];\n    localPlayer.load();\n  }.bind(this);\n\n  playerTarget.isMediaLoaded = function (mediaIndex) {\n    if (!mediaIndex) {\n      return (localPlayer.src !== null && localPlayer.src !== \"\");\n    } else {\n      return (localPlayer.src == this.mediaContents[mediaIndex]['sources'][0]);\n    }\n  }.bind(this);\n\n  playerTarget.getCurrentMediaTime = function () {\n    return localPlayer.currentTime;\n  };\n\n  playerTarget.getMediaDuration = function () {\n    return localPlayer.duration;\n  };\n\n  playerTarget.updateDisplay = function () {\n    // playerstate view\n    document.getElementById('playerstate').style.display = 'none';\n    document.getElementById('playerstatebg').style.display = 'none';\n    document.getElementById('video_image_overlay').style.display = 'none';\n\n    // media_info view\n    document.getElementById('media_title').innerHTML =\n      castPlayer.mediaContents[castPlayer.currentMediaIndex]['title'];\n    document.getElementById('media_subtitle').innerHTML =\n      castPlayer.mediaContents[castPlayer.currentMediaIndex]['subtitle'];\n  };\n\n  playerTarget.updateCurrentTimeDisplay = function () {\n    // Increment for local playback\n    this.currentMediaTime += 1;\n    this.playerHandler.setTimeString(document.getElementById('currentTime'), this.currentMediaTime);\n  }.bind(this);\n\n  playerTarget.updateDurationDisplay = function () {\n    this.playerHandler.setTimeString(document.getElementById('duration'), this.mediaDuration);\n  }.bind(this);\n\n  playerTarget.setTimeString = function (element, time) {\n    let currentTimeString = this.getMediaTimeString(time);\n    if (currentTimeString !== null) {\n      element.style.display = '';\n      element.innerHTML = currentTimeString;\n    } else {\n      element.style.display = 'none';\n    }\n  }.bind(this);\n\n  playerTarget.setVolume = function (volumeSliderPosition) {\n    localPlayer.volume = volumeSliderPosition < FULL_VOLUME_HEIGHT ?\n      volumeSliderPosition / FULL_VOLUME_HEIGHT : 1;\n    var p = document.getElementById('audio_bg_level');\n    p.style.height = volumeSliderPosition + 'px';\n    p.style.marginTop = -volumeSliderPosition + 'px';\n  };\n\n  playerTarget.mute = function () {\n    localPlayer.muted = true;\n  };\n\n  playerTarget.unMute = function () {\n    localPlayer.muted = false;\n  };\n\n  playerTarget.isMuted = function () {\n    return localPlayer.muted;\n  };\n\n  playerTarget.seekTo = function (time) {\n    localPlayer.currentTime = time;\n  };\n\n  this.playerHandler.setTarget(playerTarget);\n\n  this.playerHandler.setVolume(DEFAULT_VOLUME * FULL_VOLUME_HEIGHT);\n\n  this.showFullscreenButton();\n\n  this.enableProgressBar(true);\n\n  if (this.currentMediaTime > 0) {\n    this.playerHandler.load();\n    this.playerHandler.play();\n  }\n};\n\n/**\n * Set the PlayerHandler target to use the remote player\n * Add event listeners for player changes which may occur outside sender app.\n */\nCastPlayer.prototype.setupRemotePlayer = function () {\n  // Triggers when the media info or the player state changes\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,\n    function (event) {\n      let session = cast.framework.CastContext.getInstance().getCurrentSession();\n      if (!session) {\n        this.mediaInfo = null;\n        this.isLiveContent = false;\n        this.playerHandler.updateDisplay();\n        return;\n      }\n\n      let media = session.getMediaSession();\n      if (!media) {\n        this.mediaInfo = null;\n        this.isLiveContent = false;\n        this.playerHandler.updateDisplay();\n        return;\n      }\n\n      this.mediaInfo = media.media;\n\n      if (this.mediaInfo) {\n        this.isLiveContent = (this.mediaInfo.streamType ==\n          chrome.cast.media.StreamType.LIVE);\n      } else {\n        this.isLiveContent = false;\n      }\n\n      if (media.playerState == PLAYER_STATE.PLAYING && this.playerState !== PLAYER_STATE.PLAYING) {\n        this.playerHandler.prepareToPlay();\n      }\n\n      this.removeAdMarkers();\n      this.updateAdMarkers();\n\n      this.playerHandler.updateDisplay();\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.CAN_SEEK_CHANGED,\n    function (event) {\n      this.enableProgressBar(event.value);\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,\n    function () {\n      if (this.remotePlayer.isPaused) {\n        this.playerHandler.pause();\n      } else if (this.playerState !== PLAYER_STATE.PLAYING) {\n        // If currently not playing, start to play.\n        // This occurs if starting to play from local, but this check is\n        // required if the state is changed remotely.\n        this.playerHandler.play();\n      }\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,\n    function () {\n      if (this.remotePlayer.isMuted) {\n        this.playerHandler.mute();\n      } else {\n        this.playerHandler.unMute();\n      }\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,\n    function () {\n      var newVolume = this.remotePlayer.volumeLevel * FULL_VOLUME_HEIGHT;\n      var p = document.getElementById('audio_bg_level');\n      p.style.height = newVolume + 'px';\n      p.style.marginTop = -newVolume + 'px';\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,\n    function (event) {\n      this.isPlayingBreak(event.value);\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.WHEN_SKIPPABLE_CHANGED,\n    function (event) {\n      this.onWhenSkippableChanged(event.value);\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.CURRENT_BREAK_CLIP_TIME_CHANGED,\n    function (event) {\n      this.onCurrentBreakClipTimeChanged(event.value);\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.BREAK_CLIP_ID_CHANGED,\n    function (event) {\n      this.onBreakClipIdChanged(event.value);\n    }.bind(this)\n  );\n\n  this.remotePlayerController.addEventListener(\n    cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,\n    function (event) {\n      console.log('LIVE_SEEKABLE_RANGE_CHANGED');\n      this.liveSeekableRange = event.value;\n    }.bind(this)\n  );\n\n  // This object will implement PlayerHandler callbacks with\n  // remotePlayerController, and makes necessary UI updates specific\n  // to remote playback.\n  var playerTarget = {};\n\n  playerTarget.play = function () {\n    if (this.remotePlayer.isPaused) {\n      this.remotePlayerController.playOrPause();\n    }\n\n    var vi = document.getElementById('video_image');\n    vi.style.display = '';\n    var localPlayer = document.getElementById('video_element');\n    localPlayer.style.display = 'none';\n  }.bind(this);\n\n  playerTarget.pause = function () {\n    if (!this.remotePlayer.isPaused) {\n      this.remotePlayerController.playOrPause();\n    }\n  }.bind(this);\n\n  playerTarget.stop = function () {\n    this.remotePlayerController.stop();\n  }.bind(this);\n\n  // Load request for local -> remote\n  playerTarget.load = function (mediaIndex) {\n    console.log('Loading...' + this.mediaContents[mediaIndex]['title']);\n\n    let mediaInfo = new chrome.cast.media.MediaInfo(this.mediaContents[mediaIndex]['sources'][0], 'video/mp4');\n    mediaInfo.streamType = chrome.cast.media.StreamType.BUFFERED;\n    mediaInfo.metadata = new chrome.cast.media.TvShowMediaMetadata();\n    mediaInfo.metadata.title = this.mediaContents[mediaIndex]['title'];\n    mediaInfo.metadata.subtitle = this.mediaContents[mediaIndex]['subtitle'];\n    mediaInfo.metadata.images = [{\n      'url': MEDIA_SOURCE_ROOT + this.mediaContents[mediaIndex]['thumb']\n    }];\n\n    let request = new chrome.cast.media.LoadRequest(mediaInfo);\n    request.currentTime = this.currentMediaTime;\n\n    if (ENABLE_ADS) {\n      // Add sample breaks and breakClips.\n      mediaInfo.breakClips = breakClipsJSON;\n      mediaInfo.breaks = breaksJSON;\n    } else if (ENABLE_LIVE) {\n      // Change the streamType and add live specific metadata.\n      mediaInfo.streamType = chrome.cast.media.StreamType.LIVE;\n      // TODO: Set the metadata on the receiver side in your implementation.\n      // startAbsoluteTime and sectionStartTimeInMedia will be set for you.\n      // See https://developers.google.com/cast/docs/caf_receiver/live.\n\n      // TODO: Start time, is a fake timestamp. Use correct values for your implementation.\n      let currentTime = new Date();\n      // Convert from milliseconds to seconds.\n      currentTime = currentTime / 1000;\n      let sectionStartAbsoluteTime = currentTime;\n\n      // Duration should be -1 for live streams.\n      mediaInfo.duration = -1;\n      // TODO: Set on the receiver for your implementation.\n      mediaInfo.startAbsoluteTime = currentTime;\n      mediaInfo.metadata.sectionStartAbsoluteTime = sectionStartAbsoluteTime;\n      // TODO: Set on the receiver for your implementation.\n      mediaInfo.metadata.sectionStartTimeInMedia = 0;\n      mediaInfo.metadata.sectionDuration = this.mediaContents[mediaIndex]['duration'];\n\n      let item = new chrome.cast.media.QueueItem(mediaInfo);\n      request.queueData = new chrome.cast.media.QueueData();\n      request.queueData.items = [item];\n      request.queueData.name = \"Sample Queue for Live\";\n    }\n\n    // Do not immediately start playing if the player was previously PAUSED.\n    if (!this.playerStateBeforeSwitch || this.playerStateBeforeSwitch == PLAYER_STATE.PAUSED) {\n      request.autoplay = false;\n    } else {\n      request.autoplay = true;\n    }\n\n    cast.framework.CastContext.getInstance().getCurrentSession().loadMedia(request).then(\n      function () {\n        console.log('Remote media loaded');\n      }.bind(this),\n      function (errorCode) {\n        this.playerState = PLAYER_STATE.IDLE;\n        console.log('Remote media load error: ' +\n          CastPlayer.getErrorMessage(errorCode));\n        this.playerHandler.updateDisplay();\n      }.bind(this));\n  }.bind(this);\n\n  playerTarget.isMediaLoaded = function (mediaIndex) {\n    let session = cast.framework.CastContext.getInstance().getCurrentSession();\n    if (!session) return false;\n\n    let media = session.getMediaSession();\n    if (!media) return false;\n\n    if (media.playerState == PLAYER_STATE.IDLE) {\n      return false;\n    }\n\n    // No need to verify local mediaIndex content.\n    return true;\n  }.bind(this);\n\n  /**\n   * @return {number?} Current media time for the content. Always returns\n   *      media time even if in clock time (conversion done when displaying).\n   */\n  playerTarget.getCurrentMediaTime = function () {\n    if (this.isLiveContent && this.mediaInfo.metadata &&\n      this.mediaInfo.metadata.sectionStartTimeInMedia) {\n      return this.remotePlayer.currentTime - this.mediaInfo.metadata.sectionStartTimeInMedia;\n    } else {\n      // VOD and live scenerios where live metadata is not provided.\n      return this.remotePlayer.currentTime;\n    }\n  }.bind(this);\n\n  /**\n   * @return {number?} media time duration for the content. Always returns\n   *      media time even if in clock time (conversion done when displaying).\n   */\n  playerTarget.getMediaDuration = function () {\n    if (this.isLiveContent) {\n      // Scenerios when live metadata is not provided.\n      if (this.mediaInfo.metadata == undefined ||\n        this.mediaInfo.metadata.sectionDuration == undefined ||\n        this.mediaInfo.metadata.sectionStartTimeInMedia == undefined) {\n        return null;\n      }\n\n      return this.mediaInfo.metadata.sectionDuration;\n    } else {\n      return this.remotePlayer.duration;\n    }\n  }.bind(this);\n\n  playerTarget.updateDisplay = function () {\n    let castSession = cast.framework.CastContext.getInstance().getCurrentSession();\n    if (castSession && castSession.getMediaSession() && castSession.getMediaSession().media) {\n      let media = castSession.getMediaSession();\n      let mediaInfo = media.media;\n\n      // image placeholder for video view\n      var vi = document.getElementById('video_image');\n      if (mediaInfo.metadata && mediaInfo.metadata.images &&\n        mediaInfo.metadata.images.length > 0) {\n        vi.src = mediaInfo.metadata.images[0].url;\n      }\n\n      // playerstate view\n      document.getElementById('playerstate').style.display = 'block';\n      document.getElementById('playerstatebg').style.display = 'block';\n      document.getElementById('video_image_overlay').style.display = 'block';\n\n      let mediaTitle = '';\n      let mediaEpisodeTitle = '';\n      let mediaSubtitle = '';\n\n      if (mediaInfo.metadata) {\n        mediaTitle = mediaInfo.metadata.title;\n        mediaEpisodeTitle = mediaInfo.metadata.episodeTitle;\n        // Append episode title if present\n        mediaTitle = mediaEpisodeTitle ? mediaTitle + ': ' + mediaEpisodeTitle : mediaTitle;\n        // Do not display mediaTitle if not defined.\n        mediaTitle = (mediaTitle) ? mediaTitle + ' ' : '';\n        mediaSubtitle = mediaInfo.metadata.subtitle;\n        mediaSubtitle = (mediaSubtitle) ? mediaSubtitle + ' ' : '';\n      }\n\n      if (DEMO_MODE) {\n        document.getElementById('playerstate').innerHTML =\n          (ENABLE_LIVE ? 'Live Content ' : 'Sample Video ') + media.playerState + ' on Chromecast';\n\n        // media_info view\n        document.getElementById('media_title').innerHTML = (ENABLE_LIVE ? 'Live Content' : 'Sample Video');\n        document.getElementById('media_subtitle').innerHTML = '';\n      } else {\n        document.getElementById('playerstate').innerHTML =\n          mediaTitle + media.playerState + ' on ' +\n          castSession.getCastDevice().friendlyName;\n\n        // media_info view\n        document.getElementById('media_title').innerHTML = mediaTitle;\n        document.getElementById('media_subtitle').innerHTML = mediaSubtitle;\n      }\n\n      // live information\n      if (mediaInfo.streamType == chrome.cast.media.StreamType.LIVE) {\n        this.liveSeekableRange = media.liveSeekableRange;\n\n        let live_indicator = document.getElementById('live_indicator');\n        live_indicator.style.display = 'block';\n\n        // Display indicator if current time is close to the end of\n        // the seekable range.\n        if (this.liveSeekableRange && (Math.abs(media.getEstimatedTime() - this.liveSeekableRange.end) < LIVE_INDICATOR_BUFFER)) {\n          live_indicator.src = \"imagefiles/live_indicator_active.png\";\n        } else {\n          live_indicator.src = \"imagefiles/live_indicator_inactive.png\";\n        }\n      } else {\n        document.getElementById('live_indicator').style.display = 'none';\n      }\n    } else {\n      // playerstate view\n      document.getElementById('playerstate').style.display = 'none';\n      document.getElementById('playerstatebg').style.display = 'none';\n      document.getElementById('video_image_overlay').style.display = 'none';\n\n      // media_info view\n      document.getElementById('media_title').innerHTML = \"\";\n      document.getElementById('media_subtitle').innerHTML = \"\";\n    }\n  }.bind(this);\n\n  playerTarget.updateCurrentTimeDisplay = function () {\n    this.playerHandler.setTimeString(document.getElementById('currentTime'), this.playerHandler.getCurrentMediaTime());\n  }.bind(this);\n\n  playerTarget.updateDurationDisplay = function () {\n    this.playerHandler.setTimeString(document.getElementById('duration'), this.playerHandler.getMediaDuration());\n  }.bind(this);\n\n  playerTarget.setTimeString = function (element, time) {\n    let currentTimeString = this.getMediaTimeString(time);\n\n    if (this.isLiveContent) {\n      if (currentTimeString == null) {\n        element.style.display = 'none';\n        return;\n      }\n\n      // clock time\n      if (this.mediaInfo.metadata && this.mediaInfo.metadata.sectionStartAbsoluteTime !== undefined) {\n        element.style.display = 'flex';\n        element.innerHTML = this.getClockTimeString(time + this.mediaInfo.metadata.sectionStartAbsoluteTime);\n      } else {\n        // media time\n        element.style.display = 'flex';\n        element.innerHTML = currentTimeString;\n      }\n    } else {\n      if (currentTimeString !== null) {\n        element.style.display = 'flex';\n        element.innerHTML = currentTimeString;\n      } else {\n        element.style.display = 'none';\n      }\n    }\n  }.bind(this);\n\n  playerTarget.setVolume = function (volumeSliderPosition) {\n    var currentVolume = this.remotePlayer.volumeLevel;\n    var p = document.getElementById('audio_bg_level');\n    if (volumeSliderPosition < FULL_VOLUME_HEIGHT) {\n      p.style.height = volumeSliderPosition + 'px';\n      p.style.marginTop = -volumeSliderPosition + 'px';\n      currentVolume = volumeSliderPosition / FULL_VOLUME_HEIGHT;\n    } else {\n      currentVolume = 1;\n    }\n    this.remotePlayer.volumeLevel = currentVolume;\n    this.remotePlayerController.setVolumeLevel();\n  }.bind(this);\n\n  playerTarget.mute = function () {\n    if (!this.remotePlayer.isMuted) {\n      this.remotePlayerController.muteOrUnmute();\n    }\n  }.bind(this);\n\n  playerTarget.unMute = function () {\n    if (this.remotePlayer.isMuted) {\n      this.remotePlayerController.muteOrUnmute();\n    }\n  }.bind(this);\n\n  playerTarget.isMuted = function () {\n    return this.remotePlayer.isMuted;\n  }.bind(this);\n\n  playerTarget.seekTo = function (time) {\n    this.remotePlayer.currentTime = time;\n    this.remotePlayerController.seek();\n  }.bind(this);\n\n  this.playerHandler.setTarget(playerTarget);\n\n  // Setup remote player properties on setup\n  if (this.remotePlayer.isMuted) {\n    this.playerHandler.mute();\n  }\n  this.enableProgressBar(this.remotePlayer.canSeek);\n  // The remote player may have had a volume set from previous playback\n  var currentVolume = this.remotePlayer.volumeLevel * FULL_VOLUME_HEIGHT;\n  var p = document.getElementById('audio_bg_level');\n  p.style.height = currentVolume + 'px';\n  p.style.marginTop = -currentVolume + 'px';\n\n  // Show media_control\n  document.getElementById('media_control').style.opacity = 0.7;\n\n  this.hideFullscreenButton();\n\n  // If resuming a session, take the remote properties and continue the existing\n  // playback. Otherwise, load local content.\n  if (cast.framework.CastContext.getInstance().getCurrentSession().getSessionState() ==\n    cast.framework.SessionState.SESSION_RESUMED) {\n    console.log('Resuming session');\n    this.playerHandler.prepareToPlay();\n\n    // New media has been loaded so the previous ad markers should\n    // be removed.\n    this.removeAdMarkers();\n    this.updateAdMarkers();\n  } else {\n    this.playerHandler.load();\n  }\n};\n\n/**\n * Callback when media is loaded in local player\n */\nCastPlayer.prototype.onMediaLoadedLocally = function () {\n  var localPlayer = document.getElementById('video_element');\n  localPlayer.currentTime = this.currentMediaTime;\n\n  this.playerHandler.prepareToPlay();\n};\n\n/**\n * Select a media content\n * @param {number} mediaIndex A number for media index\n */\nCastPlayer.prototype.selectMedia = function (mediaIndex) {\n  console.log('Media index selected: ' + mediaIndex);\n\n  this.currentMediaIndex = mediaIndex;\n  // Clear currentMediaInfo when playing content from the sender.\n  this.playerHandler.currentMediaInfo = undefined;\n\n  // Set video image\n  var vi = document.getElementById('video_image');\n  vi.src = MEDIA_SOURCE_ROOT + this.mediaContents[mediaIndex]['thumb'];\n\n  // Reset progress bar\n  var pi = document.getElementById('progress_indicator');\n  pi.style.marginLeft = '0px';\n  var progress = document.getElementById('progress');\n  progress.style.width = '0px';\n\n  let seekable_window = document.getElementById('seekable_window');\n  let unseekable_overlay = document.getElementById('unseekable_overlay');\n  seekable_window.style.width = PROGRESS_BAR_WIDTH;\n  unseekable_overlay.style.width = '0px';\n\n  // Stop timer and reset time displays\n  this.stopProgressTimer();\n  this.currentMediaTime = 0;\n  this.playerHandler.setTimeString(document.getElementById('currentTime'), 0);\n  this.playerHandler.setTimeString(document.getElementById('duration'), 0);\n\n  this.playerState = PLAYER_STATE.IDLE;\n  this.playerHandler.play();\n};\n\n/**\n * Media seek function\n * @param {Event} event An event object from seek\n */\nCastPlayer.prototype.seekMedia = function (event) {\n  if (this.mediaDuration == null || (cast.framework.CastContext.getInstance().getCurrentSession() && !this.remotePlayer.canSeek)) {\n    console.log('Error - Not seekable');\n    return;\n  }\n\n  if (this.isLiveContent && !this.liveSeekableRange) {\n    console.log('Live content has no seekable range.')\n    return;\n  }\n\n  var position = parseInt(event.offsetX, 10);\n  var pi = document.getElementById('progress_indicator');\n  var progress = document.getElementById('progress');\n  let seekTime = 0;\n  let pp = 0;\n  let pw = 0;\n  if (event.currentTarget.id == 'progress_indicator') {\n    seekTime = parseInt(this.currentMediaTime + this.mediaDuration * position /\n      PROGRESS_BAR_WIDTH, 10);\n    pp = parseInt(pi.style.marginLeft, 10) + position;\n    pw = parseInt(progress.style.width, 10) + position;\n  } else {\n    seekTime = parseInt(position * this.mediaDuration / PROGRESS_BAR_WIDTH, 10);\n    pp = position;\n    pw = position;\n  }\n\n  if (this.playerState === PLAYER_STATE.PLAYING ||\n    this.playerState === PLAYER_STATE.PAUSED) {\n    this.currentMediaTime = seekTime;\n    progress.style.width = pw + 'px';\n    pi.style.marginLeft = pp + 'px';\n  }\n\n  if (this.isLiveContent) {\n    seekTime += this.mediaInfo.metadata.sectionStartTimeInMedia;\n  }\n\n  this.playerHandler.seekTo(seekTime);\n};\n\n/**\n * Set current player volume\n * @param {Event} mouseEvent\n */\nCastPlayer.prototype.setVolume = function (mouseEvent) {\n  var p = document.getElementById('audio_bg_level');\n  var pos = 0;\n  if (mouseEvent.currentTarget.id === 'audio_bg_track') {\n    pos = FULL_VOLUME_HEIGHT - parseInt(mouseEvent.offsetY, 10);\n  } else {\n    pos = parseInt(p.clientHeight, 10) - parseInt(mouseEvent.offsetY, 10);\n  }\n  this.playerHandler.setVolume(pos);\n};\n\n/**\n * Starts the timer to increment the media progress bar\n */\nCastPlayer.prototype.startProgressTimer = function () {\n  this.stopProgressTimer();\n\n  // Start progress timer\n  this.timer = setInterval(this.incrementMediaTimeHandler, TIMER_STEP);\n};\n\n/**\n * Stops the timer to increment the media progress bar\n */\nCastPlayer.prototype.stopProgressTimer = function () {\n  if (this.timer) {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n};\n\n/**\n * Increment media current time depending on remote or local playback\n */\nCastPlayer.prototype.incrementMediaTime = function () {\n  // First sync with the current player's time\n  this.currentMediaTime = this.playerHandler.getCurrentMediaTime();\n  this.mediaDuration = this.playerHandler.getMediaDuration();\n\n  this.playerHandler.updateDurationDisplay();\n\n  if (this.mediaDuration == null || this.currentMediaTime < this.mediaDuration || this.isLiveContent) {\n    this.playerHandler.updateCurrentTimeDisplay();\n    this.updateProgressBarByTimer();\n  } else if (this.mediaDuration > 0) {\n    this.endPlayback();\n  }\n};\n\n/**\n * Update progress bar and currentTime based on timer\n */\nCastPlayer.prototype.updateProgressBarByTimer = function () {\n  var progressBar = document.getElementById('progress');\n  var pi = document.getElementById('progress_indicator');\n\n  // Live situation where the progress and duration is unknown.\n  if (this.mediaDuration == null) {\n    if (!this.isLiveContent) {\n      console.log('Error - Duration is not defined for a VOD stream.');\n    }\n\n    progressBar.style.width = '0px';\n    document.getElementById('skip').style.display = 'none';\n    pi.style.display = 'none';\n\n    let seekable_window = document.getElementById('seekable_window');\n    let unseekable_overlay = document.getElementById('unseekable_overlay');\n    seekable_window.style.width = '0px';\n    unseekable_overlay.style.width = '0px';\n    return;\n  } else {\n    pi.style.display = '';\n  }\n\n  if (isNaN(parseInt(progressBar.style.width, 10))) {\n    progressBar.style.width = '0px';\n  }\n\n  // Prevent indicator from exceeding the max width. Happens during\n  // short media when each progress step is large\n  var pp = Math.floor(PROGRESS_BAR_WIDTH * this.currentMediaTime / this.mediaDuration);\n  if (pp > PROGRESS_BAR_WIDTH) {\n    pp = PROGRESS_BAR_WIDTH;\n  } else if (pp < 0) {\n    pp = 0;\n  }\n\n  progressBar.style.width = pp + 'px';\n  pi.style.marginLeft = pp + 'px';\n\n  let seekable_window = document.getElementById('seekable_window');\n  let unseekable_overlay = document.getElementById('unseekable_overlay');\n  if (this.isLiveContent) {\n    if (this.liveSeekableRange) {\n      // Use the liveSeekableRange to draw the seekable and unseekable windows\n      let seekableMediaPosition = Math.max(this.mediaInfo.metadata.sectionStartTimeInMedia, this.liveSeekableRange.end) -\n        this.mediaInfo.metadata.sectionStartTimeInMedia;\n      let seekableWidth = Math.floor(PROGRESS_BAR_WIDTH * seekableMediaPosition / this.mediaDuration);\n      if (seekableWidth > PROGRESS_BAR_WIDTH) {\n        seekableWidth = PROGRESS_BAR_WIDTH;\n      } else if (seekableWidth < 0) {\n        seekableWidth = 0;\n      }\n      seekable_window.style.width = seekableWidth + 'px';\n\n      let unseekableMediaPosition = Math.max(this.mediaInfo.metadata.sectionStartTimeInMedia, this.liveSeekableRange.start) -\n        this.mediaInfo.metadata.sectionStartTimeInMedia;\n      let unseekableWidth = Math.floor(PROGRESS_BAR_WIDTH * unseekableMediaPosition / this.mediaDuration);\n      if (unseekableWidth > PROGRESS_BAR_WIDTH) {\n        unseekableWidth = PROGRESS_BAR_WIDTH;\n      } else if (unseekableWidth < 0) {\n        unseekableWidth = 0;\n      }\n      unseekable_overlay.style.width = unseekableWidth + 'px';\n    } else {\n      // Nothing is seekable if no liveSeekableRange\n      seekable_window.style.width = '0px';\n      unseekable_overlay.style.width = PROGRESS_BAR_WIDTH + 'px';\n    }\n  } else {\n    // Default to everything seekable\n    seekable_window.style.width = PROGRESS_BAR_WIDTH + 'px';\n    unseekable_overlay.style.width = '0px';\n  }\n\n  if (pp >= PROGRESS_BAR_WIDTH && !this.isLiveContent) {\n    this.endPlayback();\n  }\n};\n\n/**\n *  End playback. Called when media ends.\n */\nCastPlayer.prototype.endPlayback = function () {\n  this.currentMediaTime = 0;\n  this.stopProgressTimer();\n  this.playerState = PLAYER_STATE.IDLE;\n  this.playerHandler.updateDisplay();\n\n  document.getElementById('play').style.display = 'block';\n  document.getElementById('pause').style.display = 'none';\n};\n\n/**\n * @param {?number} timestamp Linux timestamp\n * @return {?string} media time string. Null if time is invalid.\n */\nCastPlayer.prototype.getMediaTimeString = function (timestamp) {\n  if (timestamp == undefined || timestamp == null) {\n    return null;\n  }\n\n  let isNegative = false;\n  if (timestamp < 0) {\n    isNegative = true;\n    timestamp *= -1;\n  }\n\n  let hours = Math.floor(timestamp / 3600);\n  let minutes = Math.floor((timestamp - (hours * 3600)) / 60);\n  let seconds = Math.floor(timestamp - (hours * 3600) - (minutes * 60));\n\n  if (hours < 10) hours = '0' + hours;\n  if (minutes < 10) minutes = '0' + minutes;\n  if (seconds < 10) seconds = '0' + seconds;\n\n  return (isNegative ? '-' : '') + hours + ':' + minutes + ':' + seconds;\n};\n\n/**\n * @param {number} timestamp Linux timestamp\n * @return {?string} ClockTime string. Null if time is invalid.\n */\nCastPlayer.prototype.getClockTimeString = function (timestamp) {\n  if (!timestamp) return \"0:00:00\";\n\n  let date = new Date(timestamp * 1000);\n  let hours = date.getHours();\n  let minutes = date.getMinutes();\n  let seconds = date.getSeconds();\n  let ampm = hours >= 12 ? 'PM' : 'AM';\n  hours = hours % 12;\n  // Hour '0' should be '12'\n  hours = hours ? hours : 12;\n  minutes = ('0' + minutes).slice(-2);\n  seconds = ('0' + seconds).slice(-2);\n  let clockTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;\n  return clockTime;\n};\n\n/**\n * Updates Ad markers in UI\n */\nCastPlayer.prototype.updateAdMarkers = function () {\n  let castSession = cast.framework.CastContext.getInstance().getCurrentSession();\n  if (!castSession) return;\n\n  let media = castSession.getMediaSession();\n  if (!media) return;\n\n  let mediaInfo = media.media;\n  if (!mediaInfo) return;\n\n  let breaks = mediaInfo.breaks;\n  let contentDuration = mediaInfo.duration;\n\n  if (!breaks) {\n    return;\n  }\n\n  for (var i = 0; i < breaks.length; i++) {\n    let adBreak = breaks[i];\n\n    // Server-side stitched Ads (embedded) are skipped when the position is beyond\n    // the duration, so they shouldn't be shown with an ad marker on the UI.\n    if (adBreak.position > contentDuration && adBreak.isEmbedded) {\n      continue;\n    }\n\n    // Place marker if not already set in position\n    if (!document.getElementById('ad' + adBreak.position)) {\n      var div = document.getElementById('progress')\n      div.innerHTML += '<div class=\"adMarker\" id=\"ad' + adBreak.position +\n        '\" style=\"margin-left: ' +\n        this.adPositionToMargin(adBreak.position, contentDuration) + 'px\"></div>';\n    }\n  }\n};\n\n/**\n * Remove Ad markers in UI\n */\nCastPlayer.prototype.removeAdMarkers = function () {\n  document.querySelectorAll('.adMarker').forEach(function (adMarker) {\n    adMarker.remove();\n  });\n};\n\n/**\n * Position of the ad marker from the margin\n */\nCastPlayer.prototype.adPositionToMargin = function (position, contentDuration) {\n  // Post-roll\n  if (position == -1) {\n    return PROGRESS_BAR_WIDTH;\n  }\n\n  // Client stitched Ads (not embedded) beyond the duration, will play at the\n  // end of the content.\n  if (position > contentDuration) {\n    return PROGRESS_BAR_WIDTH;\n  }\n\n  // Convert Ad position to margin\n  return (PROGRESS_BAR_WIDTH * position) / contentDuration;\n};\n\n/**\n * Handle BREAK_CLIP_ID_CHANGED event\n */\nCastPlayer.prototype.onBreakClipIdChanged = function () {\n  // Hide skip button when switching to a new breakClip\n  document.getElementById('skip').style.display = 'none';\n};\n\n/**\n * Disable progress bar if playing a break.\n */\nCastPlayer.prototype.isPlayingBreak = function (isPlayingBreak) {\n  this.enableProgressBar(!isPlayingBreak);\n};\n\n/**\n * Handle WHEN_SKIPPABLE_CHANGED event\n */\nCastPlayer.prototype.onWhenSkippableChanged = function (whenSkippable) {\n  this.whenSkippable = whenSkippable;\n};\n\n/**\n * Handle CURRENT_BREAK_CLIP_TIME_CHANGED event\n */\nCastPlayer.prototype.onCurrentBreakClipTimeChanged = function (currentBreakClipTime) {\n  // Unskippable\n  if (this.whenSkippable == undefined || this.whenSkippable < 0) {\n    // Hide skip button\n    document.getElementById('skip').style.display = 'none';\n  }\n  // Skippable\n  else if (this.whenSkippable !== undefined || currentBreakClipTime >= this.whenSkippable) {\n    // Show skip button\n    document.getElementById('skip').style.display = 'block';\n  }\n  // Not ready to be skipped\n  else {\n    // Hide skip button\n    document.getElementById('skip').style.display = 'none';\n  }\n};\n\n/**\n * Skip the current Ad\n */\nCastPlayer.prototype.skipAd = function () {\n  this.remotePlayerController.skipAd();\n}\n\n/**\n * Enable/disable progress bar\n */\nCastPlayer.prototype.enableProgressBar = function (enable) {\n  let progress = document.getElementById('progress');\n  let progress_indicator = document.getElementById('progress_indicator');\n  let seekable_window = document.getElementById('seekable_window');\n\n  if (enable) {\n    // Enable UI\n    progress.style.backgroundImage = \"url('./imagefiles/timeline_bg_progress.png')\";\n    progress.style.cursor = \"pointer\";\n    seekable_window.style.cursor = \"pointer\";\n    progress_indicator.style.cursor = \"pointer\";\n    progress_indicator.draggable = true;\n\n    // Add listeners\n    progress.addEventListener('click', this.seekMediaListener);\n    seekable_window.addEventListener('click', this.seekMediaListener);\n    progress_indicator.addEventListener('dragend', this.seekMediaListener);\n  } else {\n    // Disable UI\n    progress.style.backgroundImage = \"url('./imagefiles/timeline_bg_buffer.png')\";\n    progress.style.cursor = \"default\";\n    seekable_window.style.cursor = \"default\";\n    progress_indicator.style.cursor = \"default\";\n    progress_indicator.draggable = false;\n\n    // Remove listeners\n    progress.removeEventListener('click', this.seekMediaListener);\n    seekable_window.removeEventListener('click', this.seekMediaListener);\n    progress_indicator.removeEventListener('dragend', this.seekMediaListener);\n  }\n}\n\n/**\n * Request full screen mode\n */\nCastPlayer.prototype.requestFullScreen = function () {\n  // Supports most browsers and their versions\n  var element = document.getElementById('video_element');\n  var requestMethod =\n    element['requestFullScreen'] || element['webkitRequestFullScreen'];\n\n  if (requestMethod) {\n    // Native full screen.\n    requestMethod.call(element);\n    console.log('Requested fullscreen');\n  }\n};\n\n/**\n * Exit full screen mode\n */\nCastPlayer.prototype.cancelFullScreen = function () {\n  // Supports most browsers and their versions.\n  var requestMethod =\n    document['cancelFullScreen'] || document['webkitCancelFullScreen'];\n\n  if (requestMethod) {\n    requestMethod.call(document);\n  }\n};\n\n/**\n * Exit fullscreen mode by escape\n */\nCastPlayer.prototype.fullscreenChangeHandler = function () {\n  this.fullscreen = !this.fullscreen;\n};\n\n/**\n * Show expand/collapse fullscreen button\n */\nCastPlayer.prototype.showFullscreenButton = function () {\n  if (this.fullscreen) {\n    document.getElementById('fullscreen_expand').style.display = 'none';\n    document.getElementById('fullscreen_collapse').style.display = 'block';\n  } else {\n    document.getElementById('fullscreen_expand').style.display = 'block';\n    document.getElementById('fullscreen_collapse').style.display = 'none';\n  }\n};\n\n/**\n * Hide expand/collapse fullscreen button\n */\nCastPlayer.prototype.hideFullscreenButton = function () {\n  document.getElementById('fullscreen_expand').style.display = 'none';\n  document.getElementById('fullscreen_collapse').style.display = 'none';\n};\n\n/**\n * Show the media control\n */\nCastPlayer.prototype.showMediaControl = function () {\n  document.getElementById('media_control').style.opacity = 0.7;\n};\n\n/**\n * Hide the media control\n */\nCastPlayer.prototype.hideMediaControl = function () {\n  let context = cast.framework.CastContext.getInstance();\n  if (context && context.getCurrentSession()) {\n    // Do not hide controls during an active cast session.\n    document.getElementById('media_control').style.opacity = 0.7;\n  } else {\n    document.getElementById('media_control').style.opacity = 0;\n  }\n};\n\n/**\n * Show the volume slider\n */\nCastPlayer.prototype.showVolumeSlider = function () {\n  if (!this.playerHandler.isMuted()) {\n    document.getElementById('audio_bg').style.opacity = 1;\n    document.getElementById('audio_bg_track').style.opacity = 1;\n    document.getElementById('audio_bg_level').style.opacity = 1;\n    document.getElementById('audio_indicator').style.opacity = 1;\n  }\n};\n\n/**\n * Hide the volume slider\n */\nCastPlayer.prototype.hideVolumeSlider = function () {\n  document.getElementById('audio_bg').style.opacity = 0;\n  document.getElementById('audio_bg_track').style.opacity = 0;\n  document.getElementById('audio_bg_level').style.opacity = 0;\n  document.getElementById('audio_indicator').style.opacity = 0;\n};\n\n/**\n * Reset the volume slider\n */\nCastPlayer.prototype.resetVolumeSlider = function () {\n  var volumeTrackHeight = document.getElementById('audio_bg_track').clientHeight;\n  var defaultVolumeSliderHeight = DEFAULT_VOLUME * volumeTrackHeight;\n  document.getElementById('audio_bg_level').style.height =\n    defaultVolumeSliderHeight + 'px';\n  document.getElementById('audio_on').style.display = 'block';\n  document.getElementById('audio_off').style.display = 'none';\n};\n\n/**\n * Initialize UI components and add event listeners\n */\nCastPlayer.prototype.initializeUI = function () {\n  // Set initial values for title and subtitle.\n  document.getElementById('media_title').innerHTML =\n    this.mediaContents[0]['title'];\n  document.getElementById('media_subtitle').innerHTML =\n    this.mediaContents[this.currentMediaIndex]['subtitle'];\n  document.getElementById('seekable_window').addEventListener(\n    'click', this.seekMediaListener);\n  document.getElementById('progress').addEventListener(\n    'click', this.seekMediaListener);\n  document.getElementById('progress_indicator').addEventListener(\n    'dragend', this.seekMediaListener);\n  document.getElementById('skip').addEventListener(\n    'click', this.skipAd.bind(this));\n  document.getElementById('audio_on').addEventListener(\n    'click', this.playerHandler.mute.bind(this.playerHandler));\n  document.getElementById('audio_off').addEventListener(\n    'click', this.playerHandler.unMute.bind(this.playerHandler));\n  document.getElementById('audio_bg').addEventListener(\n    'mouseover', this.showVolumeSlider.bind(this));\n  document.getElementById('audio_on').addEventListener(\n    'mouseover', this.showVolumeSlider.bind(this));\n  document.getElementById('audio_bg_level').addEventListener(\n    'mouseover', this.showVolumeSlider.bind(this));\n  document.getElementById('audio_bg_track').addEventListener(\n    'mouseover', this.showVolumeSlider.bind(this));\n  document.getElementById('audio_bg_level').addEventListener(\n    'click', this.setVolume.bind(this));\n  document.getElementById('audio_bg_track').addEventListener(\n    'click', this.setVolume.bind(this));\n  document.getElementById('audio_bg').addEventListener(\n    'mouseout', this.hideVolumeSlider.bind(this));\n  document.getElementById('audio_on').addEventListener(\n    'mouseout', this.hideVolumeSlider.bind(this));\n  document.getElementById('main_video').addEventListener(\n    'mouseover', this.showMediaControl.bind(this));\n  document.getElementById('main_video').addEventListener(\n    'mouseout', this.hideMediaControl.bind(this));\n  document.getElementById('media_control').addEventListener(\n    'mouseover', this.showMediaControl.bind(this));\n  document.getElementById('media_control').addEventListener(\n    'mouseout', this.hideMediaControl.bind(this));\n  document.getElementById('fullscreen_expand').addEventListener(\n    'click', this.requestFullScreen.bind(this));\n  document.getElementById('fullscreen_collapse').addEventListener(\n    'click', this.cancelFullScreen.bind(this));\n  document.addEventListener(\n    'fullscreenchange', this.fullscreenChangeHandler.bind(this), false);\n  document.addEventListener(\n    'webkitfullscreenchange', this.fullscreenChangeHandler.bind(this), false);\n\n  // Enable play/pause buttons\n  document.getElementById('play').addEventListener(\n    'click', this.playerHandler.play.bind(this.playerHandler));\n  document.getElementById('pause').addEventListener(\n    'click', this.playerHandler.pause.bind(this.playerHandler));\n\n  document.getElementById('progress_indicator').draggable = true;\n\n  // Set up feature radio buttons\n  let noneRadio = document.getElementById('none');\n  noneRadio.onclick = function () {\n    ENABLE_LIVE = false;\n    ENABLE_ADS = false;\n    console.log(\"Features have been removed\");\n  }\n  let adsRadio = document.getElementById('ads');\n  adsRadio.onclick = function () {\n    ENABLE_LIVE = false;\n    ENABLE_ADS = true;\n    console.log(\"Ads have been enabled\");\n  }\n  let liveRadio = document.getElementById('live');\n  liveRadio.onclick = function () {\n    ENABLE_LIVE = true;\n    ENABLE_ADS = false;\n    console.log(\"Live has been enabled\");\n  }\n\n  if (ENABLE_ADS) {\n    if (ENABLE_LIVE) {\n      console.error('Only one feature can be enabled at a time. Enabling ads.');\n    }\n    adsRadio.checked = true;\n    console.log(\"Ads are enabled\");\n  } else if (ENABLE_LIVE) {\n    liveRadio.checked = true;\n    console.log(\"Live is enabled\");\n  } else {\n    noneRadio.checked = true;\n    console.log(\"No features are enabled\");\n  }\n};\n\n/**\n * Add video thumbnails div's to UI for media JSON contents\n */\nCastPlayer.prototype.addVideoThumbs = function () {\n  this.mediaContents = mediaJSON['categories'][0]['videos'];\n  var ni = document.getElementById('carousel');\n  var newdiv = null;\n  var divIdName = null;\n  for (var i = 0; i < this.mediaContents.length; i++) {\n    newdiv = document.createElement('div');\n    divIdName = 'thumb' + i + 'Div';\n    newdiv.setAttribute('id', divIdName);\n    newdiv.setAttribute('class', 'thumb');\n    newdiv.innerHTML =\n      '<img src=\"' + MEDIA_SOURCE_ROOT + this.mediaContents[i]['thumb'] +\n      '\" class=\"thumbnail\">';\n    newdiv.addEventListener('click', this.selectMedia.bind(this, i));\n    ni.appendChild(newdiv);\n  }\n};\n\n/**\n * Makes human-readable message from chrome.cast.Error\n * @param {chrome.cast.Error} error\n * @return {string} error message\n */\nCastPlayer.getErrorMessage = function (error) {\n  switch (error.code) {\n    case chrome.cast.ErrorCode.API_NOT_INITIALIZED:\n      return 'The API is not initialized.' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.CANCEL:\n      return 'The operation was canceled by the user' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.CHANNEL_ERROR:\n      return 'A channel to the receiver is not available.' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.EXTENSION_MISSING:\n      return 'The Cast extension is not available.' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.INVALID_PARAMETER:\n      return 'The parameters to the operation were not valid.' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:\n      return 'No receiver was compatible with the session request.' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.SESSION_ERROR:\n      return 'A session could not be created, or a session was invalid.' +\n        (error.description ? ' :' + error.description : '');\n    case chrome.cast.ErrorCode.TIMEOUT:\n      return 'The operation timed out.' +\n        (error.description ? ' :' + error.description : '');\n    default:\n      return error;\n  }\n};\n\nlet castPlayer = new CastPlayer();\nwindow['__onGCastApiAvailable'] = function (isAvailable) {\n  if (isAvailable) {\n    castPlayer.initializeCastPlayer();\n  }\n};\n"]}