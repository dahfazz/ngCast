!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("videogular2/compiled/src/streaming/vg-dash/vg-dash"),require("videogular2/compiled/core"),require("videogular2/compiled/controls"),require("videogular2/compiled/streaming"),require("videogular2/compiled/buffering"),require("videogular2/compiled/overlay-play")):"function"==typeof define&&define.amd?define("@thinkam.net/ng-cast",["exports","@angular/core","@angular/common","rxjs","videogular2/compiled/src/streaming/vg-dash/vg-dash","videogular2/compiled/core","videogular2/compiled/controls","videogular2/compiled/streaming","videogular2/compiled/buffering","videogular2/compiled/overlay-play"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).thinkam=e.thinkam||{},e.thinkam.net=e.thinkam.net||{},e.thinkam.net["ng-cast"]={}),e.ng.core,e.ng.common,e.rxjs,e.VgDASH,e.VgCoreModule,e.VgControlsModule,e.VgStreamingModule,e.VgBufferingModule,e.VgOverlayPlayModule)}(this,(function(e,t,i,n,o,a,r,s,d,l){"use strict";var u=function(){function e(){var e=this;this.window=window,this.status={casting:!1},this.onInitSuccess=function(){console.log("GCast initialization success")},this.onError=function(e){console.log("GCast initialization failed",e)},this.discoverDevices=function(){var t=e,i=new n.Subject;return e.cast.requestSession((function(e){t.session=e,t.setCasting(!0),i.next("CONNECTED")}),(function(e){t.setCasting(!1),"cancel"===e.code?(t.session=void 0,i.next("CANCEL")):console.error("Error selecting a cast device",e)})),i},this.onMediaDiscovered=function(e){var t=window.document.createElement("script");return t.setAttribute("type","text/javascript"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),window.document.body.appendChild(t),globalThis.CastPlayer.mediaJSON.categories=e,globalThis.CastPlayer.addMediaContents()},this.play=function(){e.currentMedia.play(null)},this.pause=function(){e.currentMedia.pause(null)},this.stop=function(){e.currentMedia.stop(null)},this.onMediaError=function(e){console.error("Error launching media",e)},globalThis.CastPlayer.mediaJSON={categories:[]}}return e.prototype.initializeCastApi=function(){var e=this;this.cast=this.window.chrome.cast;var t=new this.cast.SessionRequest("4F8B3483"),i=new this.cast.ApiConfig(t,(function(){}),(function(t){e.cast.ReceiverAvailability.AVAILABLE}));this.cast.initialize(i,this.onInitSuccess,this.onError)},e.prototype.initialize=function(e){e&&(globalThis.CastPlayer.initializeUI(),globalThis.CastPlayer.setupLocalPlayer(),globalThis.CastPlayer.initializeCastPlayer())},e.prototype.setCasting=function(e){this.status.casting=e,globalThis.CastPlayer.setupRemotePlayer()},e.prototype.getStatus=function(){return this.status},e}();u.decorators=[{type:t.Injectable}],u.ctorParameters=function(){return[]};var p=function(){function e(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}return e.fromJS=function(t){t="object"==typeof t?t:{};var i=new e;return i.init(t),i},e.prototype.init=function(e){e&&(this.id=e.id,this.tenant=e.tenant,this.name=e.name,this.description=e.description,this.url=e.url,this.duration=e.duration,this.actualStart=e.actualStart,this.realEnd=e.realEnd,this.isActive=e.isActive)},e.prototype.toJSON=function(e){return(e="object"==typeof e?e:{}).id=this.id,e.tenant=this.tenant,e.name=this.name,e.description=this.description,e.url=this.url,e.duration=this.duration,e.actualStart=this.actualStart,e.realEnd=this.realEnd,e.isActive=this.isActive,e},e}(),c=function(){function e(e){this.ngCastService=e,this.videoImage="",this.imageOffline=!1,this.premium=!1,this.srcImageOffline="",this.currentStream={type:"dash",label:"DASH: Media Stream test",source:"http://livesim.dashif.org/livesim/testpic_2s/Manifest.mpd"},this.api=new a.VgAPI,this.isDebug=!1,this.streams=[{type:"dash",label:"DASH: Media Stream test",source:"http://livesim.dashif.org/livesim/testpic_2s/Manifest.mpd"}],this.playlist=[],this.play=!1,this.isHidden=!1,this.isShow=!0,this.currentIndex=0,this.video=new p,this.appBaseUrl=""}return e.prototype.ngOnInit=function(){this.window=window,this.currentStream=this.streams[0];var e=this.ngCastService;this.window.__onGCastApiAvailable=function(t){t&&e.initializeCastApi()},this.castingStatus=this.ngCastService.getStatus()},e.prototype.ngAfterViewChecked=function(){var e=this;setInterval((function(){e.getPaused()}),500)},e.prototype.onPlayerReady=function(e){this.api=e,this.api.getDefaultMedia().subscriptions.ended.subscribe(this.nextVideo.bind(this))},e.prototype.setBitrate=function(e){switch(this.currentStream.type){case"dash":this.vgDash.setBitrate(e)}},e.prototype.nextVideo=function(){this.currentIndex++,this.currentIndex===this.playlist.length&&(this.currentIndex=0),this.video=this.playlist[this.currentIndex]},e.prototype.getPaused=function(){var e=this;if(this.media&&this.media.nativeElement)return this.paused=this.media.nativeElement.paused,this.media.nativeElement.paused;setTimeout((function(){return e.getPaused()}),2e3)},e.prototype.pause=function(){this.media.nativeElement.pause(),this.getPaused()},e.prototype.openSession=function(){this.ngCastService.discoverDevices()},e.prototype.closeSession=function(){this.ngCastService.discoverDevices()},e.prototype.tryAgain=function(){var e=this;this.imageOffline=!0,this.isHidden=!0,console.log("loading..."),setTimeout((function(){e.getVideos()}),500)},e.prototype.getVideos=function(){this.playlist&&this.playlist.length>0?(this.imageOffline=!1,this.video=this.playlist[this.currentIndex],this.getPosition(this.video)):(this.video=new p,this.tryAgain())},e.prototype.getPosition=function(e){var t=this;setTimeout((function(){var i=document.getElementById("video_element");i.load();var n=new Date,o=Math.abs(n.getTime()-new Date(t.video.actualStart).getTime());console.log("Temos no player: "+e.url),console.log("Início em: "+o),t.video.url=e.url,i.currentTime=o/1e3;var a=i.play();void 0!==a&&a.then((function(e){console.log("Estamos ao vivo!")})).catch((function(){t.play=!0}))}),1e3)},e.prototype.getMuted=function(){return this.media&&this.media.nativeElement&&this.media.nativeElement.muted||!1},e.prototype.getMaximized=function(){return this.api&&this.api.fsAPI&&this.api.fsAPI.isFullscreen&&this.api.fsAPI.isFullscreen||!1},e.prototype.toggleSound=function(){this.media.nativeElement.muted=!this.media.nativeElement.muted},e.prototype.toggleMaximize=function(){this.api.fsAPI.toggleFullscreen(this.media)},e.prototype.showVideoControls=function(){this.isHidden=!1,this.isShow=!0},e.prototype.hideVideoControls=function(){this.isHidden=!0,this.isShow=!1},e}();c.decorators=[{type:t.Component,args:[{selector:"ng-cast",template:'<div *ngIf="!imageOffline && !premium">\n    <div id="main_video">\n        <vg-player *ngIf="!imageOffline" [style.height.px]="815" (onPlayerReady)="onPlayerReady($event)"\n            (mousemove)="showVideoControls()" (mouseleave)="hideVideoControls()" (mousestop)="hideVideoControls()">\n            <vg-overlay-play></vg-overlay-play>\n            <video muted autoplay #media [vgMedia]="media" [vgDash]="video.url" crossorigin id="video_element">\n            </video>\n            <div id="media_control" class="video-controls">\n                <google-cast-launcher id="castbutton"></google-cast-launcher>\n                <div id="audio_bg"></div>\n                <div id="audio_bg_track"></div>\n                <div id="audio_indicator"></div>\n                <div id="audio_bg_level"></div>\n                <div id="audio_on"></div>\n                <div id="audio_off"></div>\n            </div>\n            <div *ngIf="!imageOffline" class="video-controls" [ngClass]="{\n                  \'hidden\': isHidden,\n                  \'show\': isShow\n              }" id="video-controls">\n                <div class="video-progress">\n                    <progress id="progress-bar" value="100" min="0"></progress>\n                    <input class="seek" id="seek" value="99.5" min="0" type="range" step="1">\n                    <div class="seek-tooltip" id="seek-tooltip">AGORA</div>\n                </div>\n                <div class="buttons">\n                    <button *ngIf="!paused" type="button" class="video-control video-control-paused" (click)="pause()">\n                        <i class="pi pi-pause"></i>\n                    </button>\n                    <button *ngIf="paused" type="button" class="video-control video-control-paused" (click)="tryAgain()">\n                        <i class="pi pi-caret-right"></i>\n                    </button>\n                    <button type="button" class="video-control video-control-maximized" (click)="toggleMaximize()">\n                        <i *ngIf="getMaximized()" class="pi pi-window-minimize"></i>\n                        <i *ngIf="!getMaximized()" class="pi pi-window-maximize"></i>\n                    </button>\n                </div>\n            </div>\n        </vg-player>\n        <img width="100%" *ngIf="imageOffline" [src]="appBaseUrl + \'/assets/common/images/tv-offline.jpg\'"\n            alt="TV Offline" />\n    </div>\n</div>\n\n<div *ngIf="!imageOffline && premium" id="main_video">\n    <div class="imageSub">\n        \x3c!-- Put Your Image Width --\x3e\n        <div class="blackbg" id="playerstatebg">IDLE</div>\n        <div class=label id="playerstate">IDLE</div>\n        <img [src]="videoImage" id="video_image">\n        <div id="video_image_overlay"></div>\n        <video id="video_element">\n        </video>\n    </div>\n\n    <div id="media_control">\n        <div id="play"></div>\n        <div id="pause"></div>\n        <div id="progress_bg"></div>\n        <div id="progress"></div>\n        <div id="progress_indicator"></div>\n        <div id="fullscreen_expand"></div>\n        <div id="fullscreen_collapse"></div>\n        <google-cast-launcher id="castbutton"></google-cast-launcher>\n        <div id="audio_bg"></div>\n        <div id="audio_bg_track"></div>\n        <div id="audio_indicator"></div>\n        <div id="audio_bg_level"></div>\n        <div id="audio_on"></div>\n        <div id="audio_off"></div>\n        <div id="duration">00:00:00</div>\n    </div>\n</div>\n<div *ngIf="!imageOffline" id="media_info">\n    <div id="media_title">\n    </div>\n    <div id="media_subtitle">\n    </div>\n    <div id="media_desc">\n        <div id="duration">00:00:00</div>\n        <div id="progress_bg"></div>\n        <div id="progress"></div>\n        <div id="progress_indicator"></div>\n    </div>\n</div>\n\n<div *ngIf="!imageOffline" id="carousel">\n</div>\n\n<img width="100%" *ngIf="imageOffline" [src]="srcImageOffline" alt="TV Offline" />',styles:['#main_video{background-color:#272c34;margin:0 auto;z-index:-1}#main_video vg-scrub-bar-current-time .background{background-color:red}#main_video .hidden{display:none}#main_video .show{display:block}#main_video .video-controls{background:rgba(0,0,0,.5);bottom:0;height:50px;left:0;position:absolute;right:0;transition:all .2s ease}#main_video .video-controls.hide{opacity:0;pointer-events:none}#main_video .video-progress{align-items:right;height:8.4px;position:relative}#main_video .video-progress #seek-tooltip{position:absolute}@media screen and (-webkit-min-device-pixel-ratio:0){#main_video .video-progress input[type=range]{-webkit-appearance:none;background-color:var(--youtube-red);overflow:hidden}#main_video .video-progress input[type=range]::-webkit-slider-runnable-track{-webkit-appearance:none;color:var(--youtube-red);height:10px;margin-top:-1px}#main_video .video-progress input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:var(--youtube-red);cursor:ew-resize;height:10px;width:10px}}#main_video .video-progress input[type=range]{background-color:var(--youtube-red)}#main_video .video-progress input[type=range]::-moz-range-progress,#main_video .video-progress input[type=range]::-moz-range-track{background-color:var(--youtube-red)}#main_video .video-progress input[type=range]::-ms-fill-lower,#main_video .video-progress input[type=range]::-ms-fill-upper{background-color:var(--youtube-red)}#main_video progress{-moz-appearance:none;-webkit-appearance:none;appearance:none;border-radius:2px;height:.5vh;pointer-events:none;position:absolute;top:0;width:100%}#main_video .buttons .video-control{align-items:center;background:none;border:2px solid #fff;border-radius:16px;color:#fff;display:flex;height:32px;justify-content:center;width:32px}#main_video .buttons .video-control i{color:#fff;line-height:16px}#main_video .buttons .video-control-paused{bottom:8px;left:1vw;position:absolute;z-index:1000}#main_video .buttons .video-control-muted{bottom:8px;position:absolute;right:5vw;z-index:1000}#main_video .buttons .video-control-maximized{bottom:8px;position:absolute;right:1vw;z-index:1000}#main_video progress::-webkit-progress-bar{background-color:var(--youtube-red);border-radius:2px}#main_video progress::-webkit-progress-value{background:#fff;border-radius:2px}#main_video progress::-moz-progress-bar{background:#fff;border:1px solid #fff}#main_video .seek{cursor:pointer;height:.5vh;margin:0;position:absolute;top:0;width:100%}#main_video .seek-tooltip{background-color:var(--youtube-red);color:#fff;content:attr(data-title);display:block;font-size:12px;font-weight:700;margin-left:5vw;padding:3px;position:absolute;top:10px}.playlist-item li{color:#fff}.kt-content.kt-grid__item.kt-grid__item--fluid.kt-grid.kt-grid--hor{background-color:#272c34}#kt_header_menu_wrapper{display:none}.kt-header__bottom{display:none!important}.player-wrapper{margin:auto;max-width:500px}.player-wrapper video{width:100%}ul{padding:0}ul li.playlist-item{background:#673ab7;cursor:pointer;list-style:none;margin-bottom:2px;padding:10px}ul li.playlist-item.selected{background-color:#ccc}body{background-color:#f2f2f2;font-family:Roboto,OpenSans,Verdana,Georgia,Serif}#msg{-webkit-transition:opacity 0 2s;color:#fff;display:none;font-size:90%;font-weight:400;margin-left:200px;transition:opacity 0 2s}#top_header_bar{background-image:url(/assets/imagefiles/header_bg-top.png);background-repeat:repeat-x;height:10px;margin:0;width:100%}#top_header{background-image:url(/assets/imagefiles/header_bg.png);height:71px;z-index:1000}#footer,#top_header{background-repeat:repeat-x;float:left;margin:0;width:100%}#footer{background-image:url(/assets/imagefiles/footer_bg.png);height:81px}#copyright{width:300px}#copyright,#footer_content{color:#fff;float:left;font-size:13px;margin:10px}#footer_content{width:400px}#footer_content_link{color:#fff}#footer_language{color:#fff;float:right;font-size:13px;margin:10px;width:200px}#logo{background-image:url(/assets/imagefiles/logo.png);float:left;height:71px;margin:10px 25px 0;width:201px}.header_tab{-moz-transition:all .6s ease-in-out;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;float:left;font-family:Roboto,OpenSans;font-size:20px;font-weight:700;height:31px;margin-top:10px;padding:20px}#title_text{text-align:center;width:100%}#main_video{float:left;width:100%}#video_image{height:536px;margin-bottom:0;margin-right:auto;margin-top:20px;width:100%}#video_image_overlay{background:linear-gradient(0deg,rgba(0,0,0,.9),transparent 72%,transparent);display:none;height:540px;margin-bottom:0;margin-right:0;margin-top:0;position:absolute;width:100%;z-index:0}#media_info{background-color:#dde0e5;clear:both;color:#000;display:block;float:left;height:116px;margin-top:10px;opacity:.9;padding:10px;width:100%}#media_title{font-size:30px;font-weight:700;margin:0 10px 0 0}#media_subtitle,#media_title{float:left;font-family:Roboto,Open Sans,Verdana,Georgia,Serif;padding:0}#media_subtitle{font-size:18px;margin:13px 0 0 30px}#media_desc{float:left;font-size:12px;margin:5px}#media_control,#media_desc{font-family:Roboto,Open Sans,Verdana,Georgia,Serif;width:100%}#media_control{-webkit-transition:opacity 1s;background-color:#000;height:60px;margin-bottom:8px;opacity:.7;padding:0;position:absolute;transition:opacity 1s;z-index:1000}#media_control:hover{opacity:.7}#play{background-image:url(/assets/imagefiles/play.png);float:left;height:40px;margin:10px 20px 10px 10px;width:65px}#play:hover{background-image:url(/assets/imagefiles/play-hover.png)}#play:press{background-image:url(/assets/imagefiles/play-press.png)}#pause{background-image:url(/assets/imagefiles/pause.png);display:none;float:left;height:40px;margin:10px 20px 10px 10px;width:65px}#pause:hover{background-image:url(/assets/imagefiles/pause-hover.png)}.button{font-family:Roboto,Open Sans,Verdana,Georgia,Serif;font-size:100%;margin:5px}.volume{margin-left:8px;width:60px}#muteText{margin-left:3px;width:30px}.muteButton{font-family:Roboto,Open Sans,Verdana,Georgia,Serif;font-size:110%}.imageIcon{padding:3px 0 0;width:25px}#media_desc{pointer-events:none}#progress{background-color:#27e7b9;cursor:pointer;float:left;height:10px;margin:20px 0 10px -620px;width:1px;z-index:10}#progress_indicator{background-color:var(--youtube-red);cursor:pointer;float:left;height:18px;margin:16px 0 10px -620px;width:6px;z-index:1000}#progress_bg{background-color:#fff;background-repeat:repeat-x;cursor:pointer;float:left;height:10px;margin:20px 20px 10px 0;width:600px}#castbutton{background-color:#000;border:none;float:right;height:32px;margin:15px 6px 14px 0;opacity:.7;outline:none;position:absolute;right:110px;width:40px}#castbutton:hover{--connected-color:#fff;--disconnected-color:#fff}#audio_off{background-image:url(/assets/imagefiles/audio_off.png);display:none}#audio_off,#audio_on{float:right;height:32px;margin:15px 4px 10px 0;position:absolute;right:60px;width:32px}#audio_on{background-image:url(/assets/imagefiles/audio_on.png);display:block}#audio_bg{background-image:url(/assets/imagefiles/audio_bg.png);height:124px;margin:-115px 8px -10px 0;opacity:.1;width:41px;z-index:10}#audio_bg,#audio_bg_track{display:block;float:right;position:absolute;right:60px}#audio_bg_track{background-image:url(/assets/imagefiles/audio_bg_track.png);height:100px;margin:-100px 20px -30px 0;opacity:0;width:16px;z-index:1000}#audio_indicator{background-image:url(/assets/imagefiles/audio_indicator.png);display:none;height:5px}#audio_bg_level,#audio_indicator{float:right;margin:-50px 20px -30px 0;opacity:0;position:absolute;right:60px;width:16px;z-index:1000}#audio_bg_level{background-image:url(/assets/imagefiles/audio_bg_level.png);display:block;height:50px}#fullscreen_expand{background-image:url(/assets/imagefiles/fullscreen_expand.png);display:block}#fullscreen_collapse,#fullscreen_expand{cursor:pointer;float:right;height:32px;margin:10px 20px 10px 0;width:32px}#fullscreen_collapse{background-image:url(/assets/imagefiles/fullscreen_collapse.png);display:none}#duration{color:#fff;display:block;float:right;height:32px;margin:18px 15px 10px;width:60px}div.imageSub{position:relative}div.imageSub img{z-index:1}div.imageSub div{bottom:0;left:0;padding:0;position:absolute;right:0}div.imageSub div.blackbg{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";background-color:#000;color:#000;filter:alpha(opacity=50);opacity:.5;z-index:2000}div.imageSub div.blackbg,div.imageSub div.label{bottom:60px;display:none;font-size:120%;height:30px;left:300px;padding:10px;width:400px}div.imageSub div.label{color:#fff;z-index:3000}#carousel{margin:20px 10px 10px 40px;width:990px}.thumb{cursor:pointer;float:left;margin:10px 10px 10px 0}.thumbnail{height:127px;margin-right:10px;width:225px}.vertical{-webkit-transform:rotate(90deg)}']}]}],c.ctorParameters=function(){return[{type:u}]},c.propDecorators={vgDash:[{type:t.ViewChild,args:[o.VgDASH,{static:!1}]}],media:[{type:t.ViewChild,args:["media",{static:!1}]}],videoImage:[{type:t.Input}],imageOffline:[{type:t.Input}],premium:[{type:t.Input}],srcImageOffline:[{type:t.Input}],currentStream:[{type:t.Input}],isDebug:[{type:t.Input}],paused:[{type:t.Input}],streams:[{type:t.Input}],playlist:[{type:t.Input}],play:[{type:t.Input}],isHidden:[{type:t.Input}],isShow:[{type:t.Input}],currentIndex:[{type:t.Input}],video:[{type:t.Input}],appBaseUrl:[{type:t.Input}]};var m=function(){};m.decorators=[{type:t.NgModule,args:[{schemas:[t.CUSTOM_ELEMENTS_SCHEMA],imports:[i.CommonModule,a.VgCoreModule,r.VgControlsModule,s.VgStreamingModule,d.VgBufferingModule,l.VgOverlayPlayModule],exports:[c],providers:[u],declarations:[c]}]}];var g=600,y=100,h="IDLE",f="BUFFERING",v="LOADED",b="PLAYING",_="PAUSED",x="ERROR",k=function(){this.playerHandler=new E(this),this.playerState=h,this.playerStateBeforeSwitch=null,this.remotePlayer=null,this.remotePlayerController=null,this.currentMediaTime=0,this.mediaDuration=-1,this.timer=null,this.incrementMediaTimeHandler=this.incrementMediaTime.bind(this),this.seekMediaListener=this.seekMedia.bind(this),this.currentMediaIndex=0,this.mediaContents=null,this.fullscreen=!1,this.mediaInfo=null,this.whenSkippable=null,this.liveSeekableRange=null,this.isLiveContent=!1,this.mediaJSON={categories:[]}};k.prototype.initializeCastPlayer=function(){var e={receiverApplicationId:"4F8B3483"};e.autoJoinPolicy=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,cast.framework.CastContext.getInstance().setOptions(e),I.remotePlayer=new cast.framework.RemotePlayer,I.remotePlayerController=new cast.framework.RemotePlayerController(I.remotePlayer),I.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,I.switchPlayer.bind(I))},k.prototype.switchPlayer=function(){I.stopProgressTimer(),I.resetVolumeSlider(),I.playerHandler.stop(),I.playerState=h,cast&&cast.framework&&I.remotePlayer.isConnected?I.setupRemotePlayer():I.setupLocalPlayer()};var E=function(e){this.target={},this.setTarget=function(e){this.target=e},this.play=function(){if(e.playerState===b||e.playerState===_||e.playerState===v){this.target.play(),e.playerState=b;var t=document.getElementById("play");t&&t.style&&t.style.display&&(t.style.display="none");var i=document.getElementById("pause");i&&i.style&&i.style.display&&(i.style.display="block"),this.updateDisplayMessage()}else this.load(e.currentMediaIndex)},this.updateDisplayMessage=function(){this.target.updateDisplayMessage()},this.pause=function(){this.target.pause(),e.playerState=_,document.getElementById("play").style.display="block",document.getElementById("pause").style.display="none"},this.stop=function(){e.playerState=h,this.target.stop()},this.load=function(t){void 0===t&&(t=null),t||(t=e.currentMediaIndex),e.playerState=f,this.target.load(t)},this.isMediaLoaded=function(e){return this.target.isMediaLoaded(e)},this.prepareToPlay=function(){e.mediaDuration=this.getMediaDuration(),e.playerHandler.updateDurationDisplay(),e.playerState=v,this.play(),e.startProgressTimer(),this.updateDisplay()},this.loaded=function(){e.currentMediaDuration=this.getMediaDuration(),e.updateMediaDuration(),e.playerState=v,e.currentMediaTime>0&&this.seekTo(e.currentMediaTime),this.play(),e.startProgressTimer(),this.updateDisplayMessage()},this.getCurrentMediaTime=function(){return this.target.getCurrentMediaTime()},this.getMediaDuration=function(){return this.target.getMediaDuration()},this.updateDisplay=function(){this.currentMediaTime=this.target.getCurrentMediaTime(),this.mediaDuration=this.target.getMediaDuration(),this.target.updateDisplay()},this.updateCurrentTimeDisplay=function(){this.target.updateCurrentTimeDisplay()},this.setTimeString=function(e,t){this.target.setTimeString(e,t)},this.setVolume=function(e){this.target.setVolume(e)},this.mute=function(){this.target.mute(),document.getElementById("audio_on").style.display="none",document.getElementById("audio_off").style.display="block"},this.unMute=function(){this.target.unMute(),document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none"},this.isMuted=function(){return this.target.isMuted()},this.seekTo=function(e){this.target.seekTo(e)}};k.prototype.setupLocalPlayer=function(){var e=document.getElementById("video_element");e.addEventListener("loadeddata",I.onMediaLoadedLocally.bind(I));var t={play:function(){e.play(),e.style.display="block"},pause:function(){e.pause()},stop:function(){"function"==typeof e.stop&&e.stop()}};t.load=function(t){e.src=I.mediaContents[t].sources[0],e.load()}.bind(I),t.getCurrentMediaTime=function(){return e.currentTime},t.getMediaDuration=function(){return e.duration},t.updateDisplayMessage=function(){document.getElementById("playerstate").style.display="none",document.getElementById("playerstatebg").style.display="none",document.getElementById("video_image_overlay").style.display="none"},t.setVolume=function(t){e.volume=t<y?t/y:1;var i=document.getElementById("audio_bg_level");i.style.height=t+"px",i.style.marginTop=-t+"px"},t.mute=function(){e.muted=!0},t.unMute=function(){e.muted=!1},t.isMuted=function(){return e.muted},t.seekTo=function(t){e.currentTime=t},I.playerHandler.setTarget(t),I.playerHandler.setVolume(50),I.showFullscreenButton(),I.currentMediaTime>0&&I.playerHandler.play()},k.prototype.setupRemotePlayer=function(){var e=cast.framework.CastContext.getInstance().getCurrentSession();I.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(){I.remotePlayer.isPaused?I.playerHandler.pause():I.playerHandler.play()}.bind(I)),I.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){I.remotePlayer.isMuted?I.playerHandler.mute():I.playerHandler.unMute()}.bind(I)),I.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(){var e=I.remotePlayer.volumeLevel*y,t=document.getElementById("audio_bg_level");t.style.height=e+"px",t.style.marginTop=-e+"px"}.bind(I));var t={};t.play=function(){I.remotePlayer.isPaused&&I.remotePlayerController.playOrPause(),document.getElementById("video_image").style.display="block",document.getElementById("video_element").style.display="none"}.bind(I),t.pause=function(){I.remotePlayer.isPaused||I.remotePlayerController.playOrPause()}.bind(I),t.stop=function(){I.remotePlayerController.stop()}.bind(I),t.load=function(t){console.log("Loading..."+I.mediaContents[t].title);var i=new chrome.cast.media.MediaInfo(I.mediaContents[t].sources[0],"video/mp4");i.metadata=new chrome.cast.media.GenericMediaMetadata,i.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,i.metadata.title=I.mediaContents[t].title,i.metadata.images=[{url:""+I.mediaContents[t].thumb}];var n=new chrome.cast.media.LoadRequest(i);e.loadMedia(n).then(I.playerHandler.loaded.bind(I.playerHandler),function(e){I.playerState=x,console.log("Remote media load error: "+k.getErrorMessage(e))}.bind(I))}.bind(I),t.getCurrentMediaTime=function(){return I.remotePlayer.currentTime}.bind(I),t.getMediaDuration=function(){return I.remotePlayer.duration}.bind(I),t.updateDisplayMessage=function(){document.getElementById("playerstate").style.display="block",document.getElementById("playerstatebg").style.display="block",document.getElementById("video_image_overlay").style.display="block",document.getElementById("playerstate").innerHTML=I.mediaContents[I.currentMediaIndex].title+" "+I.playerState+" on "+e.getCastDevice().friendlyName}.bind(I),t.setVolume=function(e){var t=I.remotePlayer.volumeLevel,i=document.getElementById("audio_bg_level");if(e<y){var n=I.currentVolume*y;e>n&&(e=n+(pos-n)/2),i.style.height=e+"px",i.style.marginTop=-e+"px",t=e/y}else t=1;I.remotePlayer.volumeLevel=t,I.remotePlayerController.setVolumeLevel()}.bind(I),t.mute=function(){I.remotePlayer.isMuted||I.remotePlayerController.muteOrUnmute()}.bind(I),t.unMute=function(){I.remotePlayer.isMuted&&I.remotePlayerController.muteOrUnmute()}.bind(I),t.isMuted=function(){return I.remotePlayer.isMuted}.bind(I),t.seekTo=function(e){I.remotePlayer.currentTime=e,I.remotePlayerController.seek()}.bind(I),I.playerHandler.setTarget(t),I.remotePlayer.isMuted&&I.playerHandler.mute();var i=I.remotePlayer.volumeLevel*y,n=document.getElementById("audio_bg_level");n.style.height=i+"px",n.style.marginTop=-i+"px",I.hideFullscreenButton(),I.playerHandler.play()},k.prototype.onMediaLoadedLocally=function(){document.getElementById("video_element").currentTime=I.currentMediaTime,I.playerHandler.loaded()},k.prototype.selectMedia=function(e){console.log("Media index selected: "+e),I.currentMediaIndex=e,I.playerHandler.currentMediaInfo=void 0,document.getElementById("video_image").src=""+I.mediaContents[e].thumb,document.getElementById("progress_indicator").style.marginLeft="0px",document.getElementById("progress").style.width="0px";var t=document.getElementById("seekable_window"),i=document.getElementById("unseekable_overlay");t.style.width=g,i.style.width="0px",I.stopProgressTimer(),I.currentMediaTime=0,I.playerHandler.setTimeString(document.getElementById("currentTime"),0),I.playerHandler.setTimeString(document.getElementById("duration"),0),I.playerState=h,I.playerHandler.play()},k.prototype.seekMedia=function(e){if(null==I.mediaDuration||cast.framework.CastContext.getInstance().getCurrentSession()&&!I.remotePlayer.canSeek)console.log("Error - Not seekable");else if(!I.isLiveContent||I.liveSeekableRange){var t=parseInt(e.offsetX,10),i=document.getElementById("progress_indicator"),n=document.getElementById("progress"),o=0,a=0,r=0;"progress_indicator"==e.currentTarget.id?(o=parseInt(I.currentMediaTime+I.mediaDuration*t/g,10),a=parseInt(i.style.marginLeft,10)+t,r=parseInt(n.style.width,10)+t):(o=parseInt(t*I.mediaDuration/g,10),a=t,r=t),I.playerState!==b&&I.playerState!==_||(I.currentMediaTime=o,n.style.width=r+"px",i.style.marginLeft=a+"px"),I.isLiveContent&&(o+=I.mediaInfo.metadata.sectionStartTimeInMedia),I.playerHandler.seekTo(o)}else console.log("Live content has no seekable range.")},k.prototype.setVolume=function(e){var t=document.getElementById("audio_bg_level"),i=0;i="audio_bg_track"===e.currentTarget.id?y-parseInt(e.offsetY,10):parseInt(t.clientHeight,10)-parseInt(e.offsetY,10),I.playerHandler.setVolume(i)},k.prototype.startProgressTimer=function(){I.stopProgressTimer(),I.timer=setInterval(I.incrementMediaTimeHandler,1e3)},k.prototype.stopProgressTimer=function(){I.timer&&(clearInterval(I.timer),I.timer=null)},k.prototype.incrementMediaTime=function(){I.currentMediaTime=I.playerHandler.getCurrentMediaTime(),I.currentMediaDuration=I.playerHandler.getMediaDuration(),I.playerState===b&&(I.currentMediaTime<I.currentMediaDuration?(I.currentMediaTime+=1,I.updateProgressBarByTimer()):I.endPlayback())},k.prototype.updateProgressBarByTimer=function(){var e=document.getElementById("progress");if(isNaN(parseInt(e.style.width,10))&&(e.style.width=0),I.currentMediaDuration>0)var t=Math.floor(g*I.currentMediaTime/I.currentMediaDuration);e.style.width=t+"px",document.getElementById("progress_indicator").style.marginLeft=-621+t+"px",t>=g&&I.endPlayback()},k.prototype.endPlayback=function(){I.currentMediaTime=0,I.stopProgressTimer(),I.playerState=h,I.playerHandler.updateDisplay();var e=document.getElementById("play");e&&e.style&&e.display&&(e.style.display="block");var t=document.getElementById("pause");t&&t.style&&t.style.display&&(t.style.display="none")},k.prototype.getMediaTimeString=function(e){if(null==e||null==e)return null;var t=!1;e<0&&(t=!0,e*=-1);var i=Math.floor(e/3600),n=Math.floor((e-3600*i)/60),o=Math.floor(e-3600*i-60*n);return i<10&&(i="0"+i),n<10&&(n="0"+n),o<10&&(o="0"+o),(t?"-":"")+i+":"+n+":"+o},k.prototype.getClockTimeString=function(e){if(!e)return"0:00:00";var t=new Date(1e3*e),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds(),a=i>=12?"PM":"AM";return(i=(i%=12)||12)+":"+(n=("0"+n).slice(-2))+":"+(o=("0"+o).slice(-2))+" "+a},k.prototype.updateAdMarkers=function(){var e=cast.framework.CastContext.getInstance().getCurrentSession();if(e){var t=e.getMediaSession();if(t){var i=t.media;if(i){var n=i.breaks,o=i.duration;if(n)for(var a=0;a<n.length;a++){var r=n[a];if(!(r.position>o&&r.isEmbedded))if(!document.getElementById("ad"+r.position))document.getElementById("progress").innerHTML+='<div class="adMarker" id="ad'+r.position+'" style="margin-left: '+I.adPositionToMargin(r.position,o)+'px"></div>'}}}}},k.prototype.removeAdMarkers=function(){document.querySelectorAll(".adMarker").forEach((function(e){e.remove()}))},k.prototype.adPositionToMargin=function(e,t){return-1==e||e>t?g:g*e/t},k.prototype.onBreakClipIdChanged=function(){var e=document.getElementById("skip");e&&e.style&&e.style.display&&(e.style.display="none")},k.prototype.isPlayingBreak=function(e){I.enableProgressBar(!e)},k.prototype.onWhenSkippableChanged=function(e){I.whenSkippable=e},k.prototype.onCurrentBreakClipTimeChanged=function(e){var t=document.getElementById("skip");null==I.whenSkippable||I.whenSkippable<0?t&&t.style&&t.style.display&&(t.style.display="none"):void 0!==I.whenSkippable||e>=I.whenSkippable?t&&t.style&&t.style.display&&(t.style.display="block"):t&&t.style&&t.style.display&&(t.style.display="none")},k.prototype.skipAd=function(){I.remotePlayerController.skipAd()},k.prototype.enableProgressBar=function(e){var t=document.getElementById("progress"),i=document.getElementById("progress_indicator"),n=document.getElementById("seekable_window");e?(t.style.backgroundImage="url('./assets/imagefiles/timeline_bg_progress.png')",t.style.cursor="pointer",n.style.cursor="pointer",i.style.cursor="pointer",i.draggable=!0,t.addEventListener("click",I.seekMediaListener),n.addEventListener("click",I.seekMediaListener),i.addEventListener("dragend",I.seekMediaListener)):(t.style.backgroundImage="url('./assets/imagefiles/timeline_bg_buffer.png')",t.style.cursor="default",n.style.cursor="default",i.style.cursor="default",i.draggable=!1,t.removeEventListener("click",I.seekMediaListener),n.removeEventListener("click",I.seekMediaListener),i.removeEventListener("dragend",I.seekMediaListener))},k.prototype.updateMediaDuration=function(){document.getElementById("duration").innerHTML=k.getDurationString(I.currentMediaDuration)},k.getDurationString=function(e){var t=""+Math.floor(e%60),i=Math.floor(e/60);if(0===i)return t;t=i%60+":"+t;var n=Math.floor(i/60);return 0===n?t:n+":"+t},k.prototype.requestFullScreen=function(){var e=document.getElementById("video_element"),t=e.requestFullScreen||e.webkitRequestFullScreen;t&&(t.call(e),console.log("Requested fullscreen"))},k.prototype.cancelFullScreen=function(){var e=document.cancelFullScreen||document.webkitCancelFullScreen;e&&e.call(document)},k.prototype.fullscreenChangeHandler=function(){I.fullscreen=!I.fullscreen},k.prototype.showFullscreenButton=function(){var e=document.getElementById("fullscreen_expand"),t=document.getElementById("fullscreen_collapse");I.fullscreen?(e&&e.style&&e.style.display&&(e.style.display="none"),t&&t.style&&t.style.display&&(t.style.display="block")):(e&&e.style&&e.style.display&&(e.style.display="block"),t&&t.style&&t.style.display&&(t.style.display="none"))},k.prototype.hideFullscreenButton=function(){var e=document.getElementById("fullscreen_expand"),t=document.getElementById("fullscreen_collapse");e&&e.style&&e.style.display&&(e.style.display="none"),t&&t.style&&t.style.display&&(t.style.display="none")},k.prototype.showMediaControl=function(){var e=document.getElementById("media_control");e&&e.style&&e.style.opacity&&(e.style.opacity=.7)},k.prototype.hideMediaControl=function(){if("undefined"!=typeof cast){var e=cast.framework.CastContext.getInstance();e&&e.getCurrentSession()?document.getElementById("media_control").style.opacity=.7:document.getElementById("media_control").style.opacity=0}},k.prototype.showVolumeSlider=function(){I.playerHandler.isMuted()||(document.getElementById("audio_bg").style.opacity=1,document.getElementById("audio_bg_track").style.opacity=1,document.getElementById("audio_bg_level").style.opacity=1,document.getElementById("audio_indicator").style.opacity=1)},k.prototype.hideVolumeSlider=function(){document.getElementById("audio_bg").style.opacity=0,document.getElementById("audio_bg_track").style.opacity=0,document.getElementById("audio_bg_level").style.opacity=0,document.getElementById("audio_indicator").style.opacity=0},k.prototype.resetVolumeSlider=function(){var e=.5*document.getElementById("audio_bg_track").clientHeight;document.getElementById("audio_bg_level").style.height=e+"px",document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none"},k.prototype.initializeUI=function(){document.getElementById("media_title").innerHTML=I.mediaContents[0].title,document.getElementById("media_subtitle").innerHTML=I.mediaContents[I.currentMediaIndex].subtitle,document.getElementById("progress_bg").addEventListener("click",I.seekMedia.bind(I)),document.getElementById("progress").addEventListener("click",I.seekMedia.bind(I)),document.getElementById("progress_indicator").addEventListener("dragend",I.seekMedia.bind(I)),document.getElementById("audio_on").addEventListener("click",I.playerHandler.mute.bind(I.playerHandler)),document.getElementById("audio_off").addEventListener("click",I.playerHandler.unMute.bind(I.playerHandler)),document.getElementById("audio_bg").addEventListener("mouseover",I.showVolumeSlider.bind(I)),document.getElementById("audio_on").addEventListener("mouseover",I.showVolumeSlider.bind(I)),document.getElementById("audio_bg_level").addEventListener("mouseover",I.showVolumeSlider.bind(I)),document.getElementById("audio_bg_track").addEventListener("mouseover",I.showVolumeSlider.bind(I)),document.getElementById("audio_bg_level").addEventListener("click",I.setVolume.bind(I)),document.getElementById("audio_bg_track").addEventListener("click",I.setVolume.bind(I)),document.getElementById("audio_bg").addEventListener("mouseout",I.hideVolumeSlider.bind(I)),document.getElementById("audio_on").addEventListener("mouseout",I.hideVolumeSlider.bind(I)),document.getElementById("main_video").addEventListener("mouseover",I.showMediaControl.bind(I)),document.getElementById("main_video").addEventListener("mouseout",I.hideMediaControl.bind(I)),document.getElementById("media_control").addEventListener("mouseover",I.showMediaControl.bind(I)),document.getElementById("media_control").addEventListener("mouseout",I.hideMediaControl.bind(I));var e=document.getElementById("fullscreen_expand");e&&e.addEventListener("click",I.requestFullScreen.bind(I));var t=document.getElementById("fullscreen_collapse");t&&t.addEventListener("click",I.cancelFullScreen.bind(I)),document.addEventListener("fullscreenchange",I.fullscreenChangeHandler.bind(I),!1),document.addEventListener("webkitfullscreenchange",I.fullscreenChangeHandler.bind(I),!1),document.getElementById("progress_indicator").draggable=!0},k.prototype.addVideoThumbs=function(){if(void 0!==I.mediaJSON&&I.mediaJSON.categories&&I.mediaJSON.categories.length>0){I.mediaContents=I.mediaJSON.categories[0].videos;for(var e=document.getElementById("carousel"),t=null,i=null,n=0;n<I.mediaContents.length;n++)i="thumb"+n+"Div",(t=document.createElement("div")).setAttribute("id",i),t.setAttribute("class","thumb"),t.innerHTML='<img src="'+I.mediaContents[n].thumb+'" class="thumbnail">',t.addEventListener("click",I.selectMedia.bind(I,n)),e.appendChild(t)}},k.prototype.addMediaContents=function(){return void 0!==I.mediaJSON&&I.mediaJSON.categories&&I.mediaJSON.categories.length>0?(I.mediaContents=I.mediaJSON.categories[0].videos,I.mediaContents):null},k.getErrorMessage=function(e){switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"The API is not initialized."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CANCEL:return"The operation was canceled by the user"+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CHANNEL_ERROR:return"A channel to the receiver is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.EXTENSION_MISSING:return"The Cast extension is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.INVALID_PARAMETER:return"The parameters to the operation were not valid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"No receiver was compatible with the session request."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.SESSION_ERROR:return"A session could not be created, or a session was invalid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.TIMEOUT:return"The operation timed out."+(e.description?" :"+e.description:"");default:return e}};var I=new k;window.__onGCastApiAvailable=function(e){e&&I.initializeCastPlayer()},window.CastPlayer=I,e.NgCastModule=m,e.NgCastService=u,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=thinkam.net-ng-cast.umd.min.js.map