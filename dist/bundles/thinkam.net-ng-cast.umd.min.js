!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("@thinkam.net/ng-cast",["exports","@angular/core","@angular/common","rxjs"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).thinkam=e.thinkam||{},e.thinkam.net=e.thinkam.net||{},e.thinkam.net["ng-cast"]={}),e.ng.core,e.ng.common,e.rxjs)}(this,(function(e,t,i,n){"use strict";var a="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/",s=!1,r=!1,o=700,l=100,d="IDLE",c="BUFFERING",u="LOADED",m="PLAYING",y="PAUSED",h=function(){this.playerHandler=new p(this),this.playerState=d,this.playerStateBeforeSwitch=null,this.remotePlayer=null,this.remotePlayerController=null,this.currentMediaTime=0,this.mediaDuration=-1,this.timer=null,this.incrementMediaTimeHandler=this.incrementMediaTime.bind(this),this.seekMediaListener=this.seekMedia.bind(this),this.currentMediaIndex=0,this.mediaContents=null,this.fullscreen=!1,this.mediaInfo=null,this.whenSkippable=null,this.liveSeekableRange=null,this.isLiveContent=!1,this.setupLocalPlayer(),this.addVideoThumbs(),this.initializeUI(),this.mediaJSON={categories:[]}};h.prototype.initializeCastPlayer=function(){var e={receiverApplicationId:"C0868879"};e.autoJoinPolicy=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,cast.framework.CastContext.getInstance().setOptions(e),this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,function(e){this.switchPlayer(e.value)}.bind(this))},h.prototype.switchPlayer=function(){this.playerStateBeforeSwitch=this.playerState,this.stopProgressTimer(),this.resetVolumeSlider(),cast&&cast.framework&&this.remotePlayer.isConnected?(this.playerHandler.pause(),this.setupRemotePlayer()):this.setupLocalPlayer()};var p=function(e){this.target={},this.setTarget=function(e){this.target=e},this.play=function(){e.playerState!=d&&this.target.isMediaLoaded(e.currentMediaIndex)?(e.playerState=m,this.target.play(),document.getElementById("play").style.display="none",document.getElementById("pause").style.display="block"):this.load(e.currentMediaIndex)},this.pause=function(){this.target.pause(),e.playerState=y,document.getElementById("play").style.display="block",document.getElementById("pause").style.display="none"},this.stop=function(){e.playerState=d,this.target.stop()},this.load=function(t){void 0===t&&(t=null),t||(t=e.currentMediaIndex),e.playerState=c,this.target.load(t)},this.isMediaLoaded=function(e){return this.target.isMediaLoaded(e)},this.prepareToPlay=function(){e.mediaDuration=this.getMediaDuration(),e.playerHandler.updateDurationDisplay(),e.playerState=u,this.play(),e.startProgressTimer(),this.updateDisplay()},this.getCurrentMediaTime=function(){return this.target.getCurrentMediaTime()},this.getMediaDuration=function(){return this.target.getMediaDuration()},this.updateDisplay=function(){this.currentMediaTime=this.target.getCurrentMediaTime(),this.mediaDuration=this.target.getMediaDuration(),this.target.updateDisplay()},this.updateCurrentTimeDisplay=function(){this.target.updateCurrentTimeDisplay()},this.updateDurationDisplay=function(){this.target.updateDurationDisplay()},this.setTimeString=function(e,t){this.target.setTimeString(e,t)},this.setVolume=function(e){this.target.setVolume(e)},this.mute=function(){this.target.mute(),document.getElementById("audio_on").style.display="none",document.getElementById("audio_off").style.display="block"},this.unMute=function(){this.target.unMute(),document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none"},this.isMuted=function(){return this.target.isMuted()},this.seekTo=function(e){this.target.seekTo(e)}};h.prototype.setupLocalPlayer=function(){var e=document.getElementById("live_indicator");e&&e.style&&e.style.display&&(e.style.display="none"),this.removeAdMarkers(),document.getElementById("skip").style.display="none";var t=document.getElementById("video_element");void 0!==t&&t&&t.addEventListener("loadeddata",this.onMediaLoadedLocally.bind(this));var i={play:function(){t.play(),document.getElementById("video_image").style.display="none",t.style.display="block"},pause:function(){t.pause()},stop:function(){t.stop()}};i.load=function(e){t.src=this.mediaContents[e].sources[0],t.load()}.bind(this),i.isMediaLoaded=function(e){return e?t.src==this.mediaContents[e].sources[0]:null!==t.src&&""!==t.src}.bind(this),i.getCurrentMediaTime=function(){return t.currentTime},i.getMediaDuration=function(){return t.duration},i.updateDisplay=function(){document.getElementById("playerstate").style.display="none",document.getElementById("playerstatebg").style.display="none",document.getElementById("video_image_overlay").style.display="none",document.getElementById("media_title").innerHTML=g.mediaContents[g.currentMediaIndex].title,document.getElementById("media_subtitle").innerHTML=g.mediaContents[g.currentMediaIndex].subtitle},i.updateCurrentTimeDisplay=function(){this.currentMediaTime+=1,this.playerHandler.setTimeString(document.getElementById("currentTime"),this.currentMediaTime)}.bind(this),i.updateDurationDisplay=function(){this.playerHandler.setTimeString(document.getElementById("duration"),this.mediaDuration)}.bind(this),i.setTimeString=function(e,t){var i=this.getMediaTimeString(t);null!==i?(e.style.display="",e.innerHTML=i):e.style.display="none"}.bind(this),i.setVolume=function(e){t&&(t.volume=e<l?e/l:1);var i=document.getElementById("audio_bg_level");void 0!==i&&i&&(i.style.height=e+"px",i.style.marginTop=-e+"px")},i.mute=function(){t.muted=!0},i.unMute=function(){t.muted=!1},i.isMuted=function(){if(t)return t.muted},i.seekTo=function(e){t.currentTime=e},this.playerHandler.setTarget(i),this.playerHandler.setVolume(50),this.showFullscreenButton(),this.enableProgressBar(!0),this.currentMediaTime>0&&(this.playerHandler.load(),this.playerHandler.play())},h.prototype.setupRemotePlayer=function(){this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,function(e){var t=cast.framework.CastContext.getInstance().getCurrentSession();if(!t)return this.mediaInfo=null,this.isLiveContent=!1,void this.playerHandler.updateDisplay();var i=t.getMediaSession();if(!i)return this.mediaInfo=null,this.isLiveContent=!1,void this.playerHandler.updateDisplay();this.mediaInfo=i.media,this.mediaInfo?this.isLiveContent=this.mediaInfo.streamType==chrome.cast.media.StreamType.LIVE:this.isLiveContent=!1,i.playerState==m&&this.playerState!==m&&this.playerHandler.prepareToPlay(),this.removeAdMarkers(),this.updateAdMarkers(),this.playerHandler.updateDisplay()}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CAN_SEEK_CHANGED,function(e){this.enableProgressBar(e.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(){this.remotePlayer.isPaused?this.playerHandler.pause():this.playerState!==m&&this.playerHandler.play()}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){this.remotePlayer.isMuted?this.playerHandler.mute():this.playerHandler.unMute()}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(){var e=this.remotePlayer.volumeLevel*l,t=document.getElementById("audio_bg_level");t.style.height=e+"px",t.style.marginTop=-e+"px"}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,function(e){this.isPlayingBreak(e.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.WHEN_SKIPPABLE_CHANGED,function(e){this.onWhenSkippableChanged(e.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_BREAK_CLIP_TIME_CHANGED,function(e){this.onCurrentBreakClipTimeChanged(e.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.BREAK_CLIP_ID_CHANGED,function(e){this.onBreakClipIdChanged(e.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,function(e){console.log("LIVE_SEEKABLE_RANGE_CHANGED"),this.liveSeekableRange=e.value}.bind(this));var e={};e.play=function(){this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause(),document.getElementById("video_image").style.display="",document.getElementById("video_element").style.display="none"}.bind(this),e.pause=function(){this.remotePlayer.isPaused||this.remotePlayerController.playOrPause()}.bind(this),e.stop=function(){this.remotePlayerController.stop()}.bind(this),e.load=function(e){console.log("Loading..."+this.mediaContents[e].title);var t=new chrome.cast.media.MediaInfo(this.mediaContents[e].sources[0],"video/mp4");t.streamType=chrome.cast.media.StreamType.BUFFERED,t.metadata=new chrome.cast.media.TvShowMediaMetadata,t.metadata.title=this.mediaContents[e].title,t.metadata.subtitle=this.mediaContents[e].subtitle,t.metadata.images=[{url:a+this.mediaContents[e].thumb}];var i=new chrome.cast.media.LoadRequest(t);if(i.currentTime=this.currentMediaTime,s)t.breakClips=breakClipsJSON,t.breaks=breaksJSON;else if(r){t.streamType=chrome.cast.media.StreamType.LIVE;var n=new Date,o=n/=1e3;t.duration=-1,t.startAbsoluteTime=n,t.metadata.sectionStartAbsoluteTime=o,t.metadata.sectionStartTimeInMedia=0,t.metadata.sectionDuration=this.mediaContents[e].duration;var l=new chrome.cast.media.QueueItem(t);i.queueData=new chrome.cast.media.QueueData,i.queueData.items=[l],i.queueData.name="Sample Queue for Live"}this.playerStateBeforeSwitch&&this.playerStateBeforeSwitch!=y?i.autoplay=!0:i.autoplay=!1,cast.framework.CastContext.getInstance().getCurrentSession().loadMedia(i).then(function(){console.log("Remote media loaded")}.bind(this),function(e){this.playerState=d,console.log("Remote media load error: "+h.getErrorMessage(e)),this.playerHandler.updateDisplay()}.bind(this))}.bind(this),e.isMediaLoaded=function(e){var t=cast.framework.CastContext.getInstance().getCurrentSession();if(!t)return!1;var i=t.getMediaSession();return!!i&&i.playerState!=d}.bind(this),e.getCurrentMediaTime=function(){return this.isLiveContent&&this.mediaInfo.metadata&&this.mediaInfo.metadata.sectionStartTimeInMedia?this.remotePlayer.currentTime-this.mediaInfo.metadata.sectionStartTimeInMedia:this.remotePlayer.currentTime}.bind(this),e.getMediaDuration=function(){return this.isLiveContent?null==this.mediaInfo.metadata||null==this.mediaInfo.metadata.sectionDuration||null==this.mediaInfo.metadata.sectionStartTimeInMedia?null:this.mediaInfo.metadata.sectionDuration:this.remotePlayer.duration}.bind(this),e.updateDisplay=function(){var e=cast.framework.CastContext.getInstance().getCurrentSession();if(e&&e.getMediaSession()&&e.getMediaSession().media){var t=e.getMediaSession(),i=t.media,n=document.getElementById("video_image");i.metadata&&i.metadata.images&&i.metadata.images.length>0&&(n.src=i.metadata.images[0].url),document.getElementById("playerstate").style.display="block",document.getElementById("playerstatebg").style.display="block",document.getElementById("video_image_overlay").style.display="block";var a="",s="",r="";if(i.metadata&&(a=i.metadata.title,a=(a=(s=i.metadata.episodeTitle)?a+": "+s:a)?a+" ":"",r=(r=i.metadata.subtitle)?r+" ":""),document.getElementById("playerstate").innerHTML=a+t.playerState+" on "+e.getCastDevice().friendlyName,document.getElementById("media_title").innerHTML=a,document.getElementById("media_subtitle").innerHTML=r,i.streamType==chrome.cast.media.StreamType.LIVE){this.liveSeekableRange=t.liveSeekableRange;var o=document.getElementById("live_indicator");o.style.display="block",this.liveSeekableRange&&Math.abs(t.getEstimatedTime()-this.liveSeekableRange.end)<50?o.src="imagefiles/live_indicator_active.png":o.src="imagefiles/live_indicator_inactive.png"}else document.getElementById("live_indicator").style.display="none"}else document.getElementById("playerstate").style.display="none",document.getElementById("playerstatebg").style.display="none",document.getElementById("video_image_overlay").style.display="none",document.getElementById("media_title").innerHTML="",document.getElementById("media_subtitle").innerHTML=""}.bind(this),e.updateCurrentTimeDisplay=function(){this.playerHandler.setTimeString(document.getElementById("currentTime"),this.playerHandler.getCurrentMediaTime())}.bind(this),e.updateDurationDisplay=function(){this.playerHandler.setTimeString(document.getElementById("duration"),this.playerHandler.getMediaDuration())}.bind(this),e.setTimeString=function(e,t){var i=this.getMediaTimeString(t);if(this.isLiveContent){if(null==i)return void(e.style.display="none");this.mediaInfo.metadata&&void 0!==this.mediaInfo.metadata.sectionStartAbsoluteTime?(e.style.display="flex",e.innerHTML=this.getClockTimeString(t+this.mediaInfo.metadata.sectionStartAbsoluteTime)):(e.style.display="flex",e.innerHTML=i)}else null!==i?(e.style.display="flex",e.innerHTML=i):e.style.display="none"}.bind(this),e.setVolume=function(e){var t=this.remotePlayer.volumeLevel,i=document.getElementById("audio_bg_level");e<l?(i.style.height=e+"px",i.style.marginTop=-e+"px",t=e/l):t=1,this.remotePlayer.volumeLevel=t,this.remotePlayerController.setVolumeLevel()}.bind(this),e.mute=function(){this.remotePlayer.isMuted||this.remotePlayerController.muteOrUnmute()}.bind(this),e.unMute=function(){this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()}.bind(this),e.isMuted=function(){return this.remotePlayer.isMuted}.bind(this),e.seekTo=function(e){this.remotePlayer.currentTime=e,this.remotePlayerController.seek()}.bind(this),this.playerHandler.setTarget(e),this.remotePlayer.isMuted&&this.playerHandler.mute(),this.enableProgressBar(this.remotePlayer.canSeek);var t=this.remotePlayer.volumeLevel*l,i=document.getElementById("audio_bg_level");i.style.height=t+"px",i.style.marginTop=-t+"px",document.getElementById("media_control").style.opacity=.7,this.hideFullscreenButton(),cast.framework.CastContext.getInstance().getCurrentSession().getSessionState()==cast.framework.SessionState.SESSION_RESUMED?(console.log("Resuming session"),this.playerHandler.prepareToPlay(),this.removeAdMarkers(),this.updateAdMarkers()):this.playerHandler.load()},h.prototype.onMediaLoadedLocally=function(){document.getElementById("video_element").currentTime=this.currentMediaTime,this.playerHandler.prepareToPlay()},h.prototype.selectMedia=function(e){console.log("Media index selected: "+e),this.currentMediaIndex=e,this.playerHandler.currentMediaInfo=void 0,document.getElementById("video_image").src=a+this.mediaContents[e].thumb,document.getElementById("progress_indicator").style.marginLeft="0px",document.getElementById("progress").style.width="0px";var t=document.getElementById("seekable_window"),i=document.getElementById("unseekable_overlay");t.style.width=o,i.style.width="0px",this.stopProgressTimer(),this.currentMediaTime=0,this.playerHandler.setTimeString(document.getElementById("currentTime"),0),this.playerHandler.setTimeString(document.getElementById("duration"),0),this.playerState=d,this.playerHandler.play()},h.prototype.seekMedia=function(e){if(null==this.mediaDuration||cast.framework.CastContext.getInstance().getCurrentSession()&&!this.remotePlayer.canSeek)console.log("Error - Not seekable");else if(!this.isLiveContent||this.liveSeekableRange){var t=parseInt(e.offsetX,10),i=document.getElementById("progress_indicator"),n=document.getElementById("progress"),a=0,s=0,r=0;"progress_indicator"==e.currentTarget.id?(a=parseInt(this.currentMediaTime+this.mediaDuration*t/o,10),s=parseInt(i.style.marginLeft,10)+t,r=parseInt(n.style.width,10)+t):(a=parseInt(t*this.mediaDuration/o,10),s=t,r=t),this.playerState!==m&&this.playerState!==y||(this.currentMediaTime=a,n.style.width=r+"px",i.style.marginLeft=s+"px"),this.isLiveContent&&(a+=this.mediaInfo.metadata.sectionStartTimeInMedia),this.playerHandler.seekTo(a)}else console.log("Live content has no seekable range.")},h.prototype.setVolume=function(e){var t=document.getElementById("audio_bg_level"),i=0;i="audio_bg_track"===e.currentTarget.id?l-parseInt(e.offsetY,10):parseInt(t.clientHeight,10)-parseInt(e.offsetY,10),this.playerHandler.setVolume(i)},h.prototype.startProgressTimer=function(){this.stopProgressTimer(),this.timer=setInterval(this.incrementMediaTimeHandler,1e3)},h.prototype.stopProgressTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},h.prototype.incrementMediaTime=function(){this.currentMediaTime=this.playerHandler.getCurrentMediaTime(),this.mediaDuration=this.playerHandler.getMediaDuration(),this.playerHandler.updateDurationDisplay(),null==this.mediaDuration||this.currentMediaTime<this.mediaDuration||this.isLiveContent?(this.playerHandler.updateCurrentTimeDisplay(),this.updateProgressBarByTimer()):this.mediaDuration>0&&this.endPlayback()},h.prototype.updateProgressBarByTimer=function(){var e=document.getElementById("progress"),t=document.getElementById("progress_indicator");if(null!=this.mediaDuration){t.style.display="",isNaN(parseInt(e.style.width,10))&&(e.style.width="0px");var i=Math.floor(o*this.currentMediaTime/this.mediaDuration);i>o?i=o:i<0&&(i=0),e.style.width=i+"px",t.style.marginLeft=i+"px";var n=document.getElementById("seekable_window"),a=document.getElementById("unseekable_overlay");if(this.isLiveContent)if(this.liveSeekableRange){var s=Math.max(this.mediaInfo.metadata.sectionStartTimeInMedia,this.liveSeekableRange.end)-this.mediaInfo.metadata.sectionStartTimeInMedia,r=Math.floor(o*s/this.mediaDuration);r>o?r=o:r<0&&(r=0),n.style.width=r+"px";var l=Math.max(this.mediaInfo.metadata.sectionStartTimeInMedia,this.liveSeekableRange.start)-this.mediaInfo.metadata.sectionStartTimeInMedia,d=Math.floor(o*l/this.mediaDuration);d>o?d=o:d<0&&(d=0),a.style.width=d+"px"}else n.style.width="0px",a.style.width="700px";else n.style.width="700px",a.style.width="0px";i>=o&&!this.isLiveContent&&this.endPlayback()}else{this.isLiveContent||console.log("Error - Duration is not defined for a VOD stream."),e.style.width="0px";var c=document.getElementById("skip");c&&c.style&&c.style.display&&(c.style.display="none"),t.style.display="none";var u=document.getElementById("seekable_window");u&&u.style&&u.style.width&&(u.style.width="0px");var m=document.getElementById("unseekable_overlay");m&&m.style&&m.style.width&&(m.style.width="0px")}},h.prototype.endPlayback=function(){this.currentMediaTime=0,this.stopProgressTimer(),this.playerState=d,this.playerHandler.updateDisplay();var e=document.getElementById("play");e&&e.style&&e.display&&(e.style.display="block");var t=document.getElementById("pause");t&&t.style&&t.style.display&&(t.style.display="none")},h.prototype.getMediaTimeString=function(e){if(null==e||null==e)return null;var t=!1;e<0&&(t=!0,e*=-1);var i=Math.floor(e/3600),n=Math.floor((e-3600*i)/60),a=Math.floor(e-3600*i-60*n);return i<10&&(i="0"+i),n<10&&(n="0"+n),a<10&&(a="0"+a),(t?"-":"")+i+":"+n+":"+a},h.prototype.getClockTimeString=function(e){if(!e)return"0:00:00";var t=new Date(1e3*e),i=t.getHours(),n=t.getMinutes(),a=t.getSeconds(),s=i>=12?"PM":"AM";return(i=(i%=12)||12)+":"+(n=("0"+n).slice(-2))+":"+(a=("0"+a).slice(-2))+" "+s},h.prototype.updateAdMarkers=function(){var e=cast.framework.CastContext.getInstance().getCurrentSession();if(e){var t=e.getMediaSession();if(t){var i=t.media;if(i){var n=i.breaks,a=i.duration;if(n)for(var s=0;s<n.length;s++){var r=n[s];if(!(r.position>a&&r.isEmbedded))if(!document.getElementById("ad"+r.position))document.getElementById("progress").innerHTML+='<div class="adMarker" id="ad'+r.position+'" style="margin-left: '+this.adPositionToMargin(r.position,a)+'px"></div>'}}}}},h.prototype.removeAdMarkers=function(){document.querySelectorAll(".adMarker").forEach((function(e){e.remove()}))},h.prototype.adPositionToMargin=function(e,t){return-1==e||e>t?o:o*e/t},h.prototype.onBreakClipIdChanged=function(){var e=document.getElementById("skip");e&&e.style&&e.style.display&&(e.style.display="none")},h.prototype.isPlayingBreak=function(e){this.enableProgressBar(!e)},h.prototype.onWhenSkippableChanged=function(e){this.whenSkippable=e},h.prototype.onCurrentBreakClipTimeChanged=function(e){var t=document.getElementById("skip");null==this.whenSkippable||this.whenSkippable<0?t&&t.style&&t.style.display&&(t.style.display="none"):void 0!==this.whenSkippable||e>=this.whenSkippable?t&&t.style&&t.style.display&&(t.style.display="block"):t&&t.style&&t.style.display&&(t.style.display="none")},h.prototype.skipAd=function(){this.remotePlayerController.skipAd()},h.prototype.enableProgressBar=function(e){var t=document.getElementById("progress"),i=document.getElementById("progress_indicator"),n=document.getElementById("seekable_window");e?(t.style.backgroundImage="url('./assets/imagefiles/timeline_bg_progress.png')",t.style.cursor="pointer",n.style.cursor="pointer",i.style.cursor="pointer",i.draggable=!0,t.addEventListener("click",this.seekMediaListener),n.addEventListener("click",this.seekMediaListener),i.addEventListener("dragend",this.seekMediaListener)):(t.style.backgroundImage="url('./assets/imagefiles/timeline_bg_buffer.png')",t.style.cursor="default",n.style.cursor="default",i.style.cursor="default",i.draggable=!1,t.removeEventListener("click",this.seekMediaListener),n.removeEventListener("click",this.seekMediaListener),i.removeEventListener("dragend",this.seekMediaListener))},h.prototype.requestFullScreen=function(){var e=document.getElementById("video_element"),t=e.requestFullScreen||e.webkitRequestFullScreen;t&&(t.call(e),console.log("Requested fullscreen"))},h.prototype.cancelFullScreen=function(){var e=document.cancelFullScreen||document.webkitCancelFullScreen;e&&e.call(document)},h.prototype.fullscreenChangeHandler=function(){this.fullscreen=!this.fullscreen},h.prototype.showFullscreenButton=function(){var e=document.getElementById("fullscreen_expand"),t=document.getElementById("fullscreen_collapse");this.fullscreen?(e&&e.style&&e.style.display&&(e.style.display="none"),t&&t.style&&t.style.display&&(t.style.display="block")):(e&&e.style&&e.style.display&&(e.style.display="block"),t&&t.style&&t.style.display&&(t.style.display="none"))},h.prototype.hideFullscreenButton=function(){var e=document.getElementById("fullscreen_expand"),t=document.getElementById("fullscreen_collapse");e&&e.style&&e.style.display&&(e.style.display="none"),t&&t.style&&t.style.display&&(t.style.display="none")},h.prototype.showMediaControl=function(){var e=document.getElementById("media_control");e&&e.style&&e.opacity&&(e.style.opacity=.7)},h.prototype.hideMediaControl=function(){if("undefined"!=typeof cast){var e=cast.framework.CastContext.getInstance();e&&e.getCurrentSession()?document.getElementById("media_control").style.opacity=.7:document.getElementById("media_control").style.opacity=0}},h.prototype.showVolumeSlider=function(){this.playerHandler.isMuted()||(document.getElementById("audio_bg").style.opacity=1,document.getElementById("audio_bg_track").style.opacity=1,document.getElementById("audio_bg_level").style.opacity=1,document.getElementById("audio_indicator").style.opacity=1)},h.prototype.hideVolumeSlider=function(){document.getElementById("audio_bg").style.opacity=0,document.getElementById("audio_bg_track").style.opacity=0,document.getElementById("audio_bg_level").style.opacity=0,document.getElementById("audio_indicator").style.opacity=0},h.prototype.resetVolumeSlider=function(){var e=.5*document.getElementById("audio_bg_track").clientHeight;document.getElementById("audio_bg_level").style.height=e+"px",document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none"},h.prototype.initializeUI=function(){this.mediaContents&&this.mediaContents.length>0&&(document.getElementById("media_title").innerHTML=this.mediaContents[0].title,document.getElementById("media_subtitle").innerHTML=this.mediaContents[this.currentMediaIndex].subtitle),document.getElementById("seekable_window").addEventListener("click",this.seekMediaListener),document.getElementById("progress").addEventListener("click",this.seekMediaListener),document.getElementById("progress_indicator").addEventListener("dragend",this.seekMediaListener),document.getElementById("skip").addEventListener("click",this.skipAd.bind(this)),document.getElementById("audio_on").addEventListener("click",this.playerHandler.mute.bind(this.playerHandler)),document.getElementById("audio_off").addEventListener("click",this.playerHandler.unMute.bind(this.playerHandler)),document.getElementById("audio_bg").addEventListener("mouseover",this.showVolumeSlider.bind(this)),document.getElementById("audio_on").addEventListener("mouseover",this.showVolumeSlider.bind(this)),document.getElementById("audio_bg_level").addEventListener("mouseover",this.showVolumeSlider.bind(this)),document.getElementById("audio_bg_track").addEventListener("mouseover",this.showVolumeSlider.bind(this)),document.getElementById("audio_bg_level").addEventListener("click",this.setVolume.bind(this)),document.getElementById("audio_bg_track").addEventListener("click",this.setVolume.bind(this)),document.getElementById("audio_bg").addEventListener("mouseout",this.hideVolumeSlider.bind(this)),document.getElementById("audio_on").addEventListener("mouseout",this.hideVolumeSlider.bind(this));var e=document.getElementById("main_video");void 0!==e&&e&&(e.addEventListener("mouseover",this.showMediaControl.bind(this)),e.addEventListener("mouseout",this.hideMediaControl.bind(this))),document.getElementById("media_control").addEventListener("mouseover",this.showMediaControl.bind(this)),document.getElementById("media_control").addEventListener("mouseout",this.hideMediaControl.bind(this)),document.getElementById("fullscreen_expand").addEventListener("click",this.requestFullScreen.bind(this)),document.getElementById("fullscreen_collapse").addEventListener("click",this.cancelFullScreen.bind(this)),document.addEventListener("fullscreenchange",this.fullscreenChangeHandler.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.fullscreenChangeHandler.bind(this),!1),document.getElementById("play").addEventListener("click",this.playerHandler.play.bind(this.playerHandler)),document.getElementById("pause").addEventListener("click",this.playerHandler.pause.bind(this.playerHandler)),document.getElementById("progress_indicator").draggable=!0;var t=document.getElementById("none");t.onclick=function(){r=!1,s=!1,console.log("Features have been removed")};var i=document.getElementById("ads");i.onclick=function(){r=!1,s=!0,console.log("Ads have been enabled")};var n=document.getElementById("live");n.onclick=function(){r=!0,s=!1,console.log("Live has been enabled")},s?(r&&console.error("Only one feature can be enabled at a time. Enabling ads."),i.checked=!0,console.log("Ads are enabled")):r?(n.checked=!0,console.log("Live is enabled")):(t.checked=!0,console.log("No features are enabled"))},h.prototype.addVideoThumbs=function(){if(void 0!==this.mediaJSON&&this.mediaJSON.categories&&this.mediaJSON.categories.length>0){this.mediaContents=this.mediaJSON.categories[0].videos;for(var e=document.getElementById("carousel"),t=null,i=null,n=0;n<this.mediaContents.length;n++)i="thumb"+n+"Div",(t=document.createElement("div")).setAttribute("id",i),t.setAttribute("class","thumb"),t.innerHTML='<img src="'+a+this.mediaContents[n].thumb+'" class="thumbnail">',t.addEventListener("click",this.selectMedia.bind(this,n)),e.appendChild(t)}},h.getErrorMessage=function(e){switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"The API is not initialized."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CANCEL:return"The operation was canceled by the user"+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CHANNEL_ERROR:return"A channel to the receiver is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.EXTENSION_MISSING:return"The Cast extension is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.INVALID_PARAMETER:return"The parameters to the operation were not valid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"No receiver was compatible with the session request."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.SESSION_ERROR:return"A session could not be created, or a session was invalid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.TIMEOUT:return"The operation timed out."+(e.description?" :"+e.description:"");default:return e}};var g=new h;window.__onGCastApiAvailable=function(e){e&&g.initializeCastPlayer()},window.CastPlayer=g;function f(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}e.ɵa=function(){function e(e){this.ngCastService=e}return e.prototype.ngOnInit=function(){this.window=window;var e=this.ngCastService;this.window.__onGCastApiAvailable=function(t){t&&e.initializeCastApi()},this.castingStatus=this.ngCastService.getStatus()},e.prototype.openSession=function(){this.ngCastService.discoverDevices()},e.prototype.closeSession=function(){this.ngCastService.discoverDevices()},e}(),e.ɵa=f([t.Component({selector:"ng-cast",template:'<i *ngIf="!castingStatus.casting" class="material-icons" (click)="openSession()">cast</i>\n<i *ngIf="castingStatus.casting" class="material-icons" (click)="closeSession()">cast_connected</i>',styles:[""]})],e.ɵa),e.NgCastService=function(){function e(){var e=this;this.window=window,this.status={casting:!1},this.onInitSuccess=function(){console.log("GCast initialization success")},this.onError=function(e){console.log("GCast initialization failed",e)},this.discoverDevices=function(){var t=e,i=new n.Subject;return e.cast.requestSession((function(e){t.session=e,t.setCasting(!0),i.next("CONNECTED")}),(function(e){t.setCasting(!1),"cancel"===e.code?(t.session=void 0,i.next("CANCEL")):console.error("Error selecting a cast device",e)})),i},this.onMediaDiscovered=function(e){var t=window.document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),window.document.body.appendChild(t),globalThis.CastPlayer.mediaJSON.categories=e},this.play=function(){e.currentMedia.play(null)},this.pause=function(){e.currentMedia.pause(null)},this.stop=function(){e.currentMedia.stop(null)},this.onMediaError=function(e){console.error("Error launching media",e)},globalThis.CastPlayer.mediaJSON={categories:[]}}return e.prototype.initializeCastApi=function(){var e=this;this.cast=this.window.chrome.cast;var t=new this.cast.SessionRequest(this.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID),i=new this.cast.ApiConfig(t,(function(){}),(function(t){e.cast.ReceiverAvailability.AVAILABLE}));this.cast.initialize(i,this.onInitSuccess,this.onError)},e.prototype.setCasting=function(e){globalThis.CastPlayer.addVideoThumbs(),this.status.casting=e},e.prototype.getStatus=function(){return this.status},e}(),e.NgCastService=f([t.Injectable()],e.NgCastService),e.NgCastModule=function(){},e.NgCastModule=f([t.NgModule({schemas:[t.CUSTOM_ELEMENTS_SCHEMA],imports:[i.CommonModule],exports:[e.ɵa],providers:[e.NgCastService],declarations:[e.ɵa]})],e.NgCastModule),Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=thinkam.net-ng-cast.umd.min.js.map